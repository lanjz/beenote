(window.webpackJsonp=window.webpackJsonp||[]).push([[7,6],{241:function(t,e,o){var content=o(264);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("32b2713e",content,!0,{sourceMap:!1})},242:function(t,e,o){var content=o(266);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("0fc70bf5",content,!0,{sourceMap:!1})},263:function(t,e,o){"use strict";var n=o(241);o.n(n).a},264:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,"[data-v-1f7e2c91]:root{--text-color:red}.no-data[data-v-1f7e2c91]{flex:1;font-size:20px;padding:20px;color:#7e8896;background:#faf9f9}.no-data .iconfont[data-v-1f7e2c91]{font-size:100px}.no-data .create-btn[data-v-1f7e2c91]{color:#398dee;cursor:pointer}",""])},265:function(t,e,o){"use strict";var n=o(242);o.n(n).a},266:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,"[data-v-11e7f891]:root{--text-color:red}.book-slider-layout[data-v-11e7f891]{padding:15px;background:#2d2d2d}.book-layout[data-v-11e7f891]{margin-top:40px;width:38px;height:38px;cursor:pointer;position:relative;z-index:1}.book-layout .book-icon-layout[data-v-11e7f891]{line-height:38px;width:100%;height:100%;text-align:center;border-radius:50%;background:#fff;overflow:hidden;position:relative}.book-layout .iconfont[data-v-11e7f891]{font-size:26px}.book-layout .book-list-layout[data-v-11e7f891]{max-width:300px;padding:7px 20px;background:#2d2d2d;position:absolute;left:100%;top:0;transition:.3s;transform:scale(0);transform-origin:0 15px}.book-layout .book-list-layout .book-list-item-layout[data-v-11e7f891]{color:#fff;text-align:center}.book-layout .book-list-layout .book-list-item-layout .icon[data-v-11e7f891]{width:25px;height:25px;line-height:22px;border:1px solid #fff;border-radius:50%}.book-layout .book-list-layout .book-list-item-layout .icon .iconfont[data-v-11e7f891]{font-size:16px}.book-layout .book-list-layout .book-list-item-layout .book-name[data-v-11e7f891]{font-size:12px;margin-left:10px}.book-layout .book-list-layout .book-list-item-layout[data-v-11e7f891]:not(:last-child){margin-bottom:10px}.book-layout .book-list-layout .book-list-item-layout.act .icon[data-v-11e7f891]{border:1px solid #398dee;background:#398dee}.show-book-list:hover .book-list-layout[data-v-11e7f891]{transform:scale(1)}.book-layout.act[data-v-11e7f891]{transform:scale(1.2)}.book-layout.act .book-icon-layout[data-v-11e7f891]{background:#398dee}.book-layout.act .book-icon-layout .iconfont[data-v-11e7f891]{color:#fff}.book-layout[data-v-11e7f891]:not(:last-child){margin-bottom:10px}.catalog-layout[data-v-11e7f891]{padding:15px 2px;overflow:auto;background:#202020;color:#919191;width:200px;max-width:200px;transition:.3s}.hidden-catalog[data-v-11e7f891]{padding:15px 0;max-width:0;overflow:hidden}",""])},271:function(t,e,o){"use strict";o.r(e);o(17),o(15),o(13),o(10),o(9),o(80),o(240);var n=o(0),r=(o(19),o(2)),c=o(8),l=o(1),d=o(3),f=o(130),h=o(244),m=o(267),k=o(268),v=o(27),_={data:function(){return{isRecently:""}},methods:{toCreateNote:function(t){var e=$nuxt._route.params,o=e.bookId,n=e.catalogId;this.$router.push("/".concat(o,"/").concat(n,"/new"))}},mounted:function(){var t=$nuxt._route.params.catalogId;this.isRecently=t===v.a.recentlyArticlesKey}},x=(o(263),o(7)),O=Object(x.a)(_,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data flex direction-column justify-content-center align-items-center"},[e("i",{staticClass:"iconfont icon-wushuju"}),this._v(" "),e("div",[this._v("还没任何有笔记"),this.isRecently?this._e():e("span",[this._v("，"),e("span",{staticClass:"create-btn",on:{click:this.toCreateNote}},[this._v("快速创建")])])])])},[],!1,null,"1f7e2c91",null).exports,y=o(245),E=o(259);o(6);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(source,!0).forEach(function(e){Object(n.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var N,I,w,j,A,R={fetch:(A=Object(r.a)(regeneratorRuntime.mark(function t(e){var o,n,r,c,l,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.store,n=e.params,r=n.noteId,c=n.bookId,l=n.catalogId,o.commit("books/BOOK_CUR_UPDATE",c),o.commit("catalogs/CATALOGS_CUR_SAVE",l),o.commit("notes/NOTE_CUR_UPDATE",r),!o.state.notes.list["".concat(c,"_").concat(l)]){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,o.dispatch("notes/NOTE_GET_BY_ID",{id:r,bookId:c,catalogId:l});case 9:d=t.sent,(f=d.data.extend)&&f.user&&o.commit("user/CUR_USER_INFO_SAVE",f.user),f&&f.books&&o.commit("books/BOOK_LIST_SAVE",{data:f.books,start:0});case 13:case"end":return t.stop()}},t)})),function(t){return A.apply(this,arguments)}),components:{TreeItem:h.a,NoteBrief:m.a,noteDes:k.a,articleFixed:y.a,bookId:"",catalogId:"",noteId:"",noNotes:O},data:function(){return{createToCatalogId:"",noData:!1,curNoteContent:{}}},computed:T({},Object(c.e)({schemaList:function(t){return t.schema.list},noteList:function(t){return t.notes.list},curBook:function(t){return t.books.curBook},curNote:function(t){return t.notes.curNote},showDir:function(t){return t.config.showDir},curCatalog:function(t){return t.catalogs.curCatalog}}),{},Object(c.c)("catalogs",["treeChainList"]),{},Object(c.c)("user",["isVisitor"]),{curNoteList:function(){return this.curCatalog&&this.noteList&&this.curBook&&this.noteList[this.curBook+"_"+this.curCatalog]||[]},curEditNote:function(){var t=this,e=this.curNoteList.find(function(e){return e._id===t.curNote});return e||{_id:"new"}}}),methods:T({},Object(c.d)("catalogs",[l.CATALOGS_CUR_SAVE]),{},Object(c.d)("notes",[l.NOTE_CUR_UPDATE]),{},Object(c.d)("books",[l.BOOK_CUR_UPDATE]),{},Object(c.b)("books",[d.BOOK_LIST_GET]),{},Object(c.b)("notes",[d.NOTES_RECENTLY_GET,d.NOTES_GET,d.NOTE_DES_GET]),{},Object(c.b)("catalogs",[d.CATALOGS_GET]),{},Object(c.b)("user",[d.USER_INFO_GET]),{getNoteData:(j=Object(r.a)(regeneratorRuntime.mark(function t(){var e,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.catalogId===v.a.recentlyArticlesKey?this[d.NOTES_RECENTLY_GET]():this[d.NOTES_GET](),Promise.all([e,this[d.BOOK_LIST_GET](),this[d.CATALOGS_GET]()]).then(function(t){var data=t[0].data.list;data.length&&!o.noteId?o.$router.push("/".concat(o.bookId,"/").concat(o.catalogId,"/").concat(data[0]._id)):o.noteId||(o.noData=!0),o.noteId&&o.$nextTick(function(){var t=document.getElementById(o.noteId),e=document.getElementById("article-item-box");if(t&&e){var n=t.offsetTop+t.clientHeight-e.clientHeight;n&&(e.scrollTop=2*n)}})}).catch(function(t){o.$alert({title:"getBookData",content:t.message})});case 2:case"end":return t.stop()}},t,this)})),function(){return j.apply(this,arguments)}),toCreateNote:function(t){this.$router.push("/".concat(this.curBook,"/").concat(Object(E.a)(t.catalogId),"/new"))},doUpdateNote:(w=Object(r.a)(regeneratorRuntime.mark(function t(){var e,o,n,r,c,l,f=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=f.length>0&&void 0!==f[0]?f[0]:{},o=e.id,n=e.force,r=e.catalogId,c="",this.curCatalog!==v.a.recentlyArticlesKey){t.next=9;break}return t.next=6,this[d.NOTES_RECENTLY_GET]({force:n});case 6:c=t.sent,t.next=12;break;case 9:return t.next=11,this[d.NOTES_GET]({force:n});case 11:c=t.sent;case 12:l=o,c.data.list.length&&!l&&(l=c.data.list[0]._id),this.$router.push("/".concat(this.curBook,"/").concat(Object(E.a)(r||this.curCatalog),"/").concat(l||""));case 15:case"end":return t.stop()}},t,this)})),function(){return w.apply(this,arguments)}),initEmitOn:function(){var t=this;f.a.$off("emitToCreateArticle"),f.a.$off("updateCurBooks"),f.a.$off("emitFromCatalog"),f.a.$on("emitToCreateArticle",function(e){t.toCreateNote(e)}),f.a.$on("emitFromCatalog",function(e){e.isNew?t.toCreateNote({catalogId:e.catalogId}):t.doUpdateNote(e)}),f.a.$on("updateCurBooks",function(){t[l.CATALOGS_CUR_SAVE](v.a.recentlyArticlesKey),t.getNoteData()})},init:(I=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isVisitor||!this.noteId){t.next=2;break}return t.abrupt("return");case 2:this[l.BOOK_CUR_UPDATE](this.bookId),this[l.CATALOGS_CUR_SAVE](this.catalogId),this.getNoteData(),this.initEmitOn();case 6:case"end":return t.stop()}},t,this)})),function(){return I.apply(this,arguments)}),dealParams:(N=Object(r.a)(regeneratorRuntime.mark(function t(){var e,o,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=$nuxt._route.params,o=e.bookId,n=e.catalogId,r=e.noteId,this.bookId=o,this.catalogId=n,this.noteId=r,this.createToCatalogId=n,this.init();case 6:case"end":return t.stop()}},t,this)})),function(){return N.apply(this,arguments)})}),mounted:function(){this.dealParams()}},S=(o(265),Object(x.a)(R,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex flex-1"},[t.isVisitor?t._e():o("div",{staticClass:"catalog-layout box-shadow",class:{"hidden-catalog":!t.showDir}},[o("TreeItem")],1),t._v(" "),o("NoteBrief",{attrs:{list:t.curNoteList},on:{emitToCreateNote:t.toCreateNote,emitUpdateNote:t.doUpdateNote}}),t._v(" "),t.noData?o("noNotes"):o("note-des",{attrs:{curNote:t.curEditNote,createToCatalogId:t.createToCatalogId,curNoteContent:t.curNoteContent},on:{emitUpdateNote:t.doUpdateNote}}),t._v(" "),t.isVisitor?t._e():o("articleFixed")],1)},[],!1,null,"11e7f891",null));e.default=S.exports},494:function(t,e,o){"use strict";o.r(e);var n={components:{notedCom:o(271).default}},r=o(7),component=Object(r.a)(n,function(){var t=this.$createElement;return(this._self._c||t)("notedCom")},[],!1,null,"575e19b4",null);e.default=component.exports}}]);