(window.webpackJsonp=window.webpackJsonp||[]).push([[7,6],{243:function(t,e,o){var content=o(266);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("04112e3c",content,!0,{sourceMap:!1})},244:function(t,e,o){var content=o(268);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("2b802bfc",content,!0,{sourceMap:!1})},265:function(t,e,o){"use strict";var n=o(243);o.n(n).a},266:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,"[data-v-d54bfff4]:root{--text-color:red}.no-data[data-v-d54bfff4]{flex:1;font-size:20px;padding:20px;color:#7e8896;background:#faf9f9}.no-data .iconfont[data-v-d54bfff4]{font-size:100px}.no-data .create-btn[data-v-d54bfff4]{color:#398dee;cursor:pointer}",""])},267:function(t,e,o){"use strict";var n=o(244);o.n(n).a},268:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,"[data-v-2c3c7f20]:root{--text-color:red}.book-slider-layout[data-v-2c3c7f20]{padding:15px;background:#2d2d2d}.book-layout[data-v-2c3c7f20]{margin-top:40px;width:38px;height:38px;cursor:pointer;position:relative;z-index:1}.book-layout .book-icon-layout[data-v-2c3c7f20]{line-height:38px;width:100%;height:100%;text-align:center;border-radius:50%;background:#fff;overflow:hidden;position:relative}.book-layout .iconfont[data-v-2c3c7f20]{font-size:26px}.book-layout .book-list-layout[data-v-2c3c7f20]{max-width:300px;padding:7px 20px;background:#2d2d2d;position:absolute;left:100%;top:0;transition:.3s;transform:scale(0);transform-origin:0 15px}.book-layout .book-list-layout .book-list-item-layout[data-v-2c3c7f20]{color:#fff;text-align:center}.book-layout .book-list-layout .book-list-item-layout .icon[data-v-2c3c7f20]{width:25px;height:25px;line-height:22px;border:1px solid #fff;border-radius:50%}.book-layout .book-list-layout .book-list-item-layout .icon .iconfont[data-v-2c3c7f20]{font-size:16px}.book-layout .book-list-layout .book-list-item-layout .book-name[data-v-2c3c7f20]{font-size:12px;margin-left:10px}.book-layout .book-list-layout .book-list-item-layout[data-v-2c3c7f20]:not(:last-child){margin-bottom:10px}.book-layout .book-list-layout .book-list-item-layout.act .icon[data-v-2c3c7f20]{border:1px solid #398dee;background:#398dee}.show-book-list:hover .book-list-layout[data-v-2c3c7f20]{transform:scale(1)}.book-layout.act[data-v-2c3c7f20]{transform:scale(1.2)}.book-layout.act .book-icon-layout[data-v-2c3c7f20]{background:#398dee}.book-layout.act .book-icon-layout .iconfont[data-v-2c3c7f20]{color:#fff}.book-layout[data-v-2c3c7f20]:not(:last-child){margin-bottom:10px}.catalog-layout[data-v-2c3c7f20]{padding:15px 2px;overflow:auto;background:#202020;color:#919191;width:200px;max-width:200px;transition:.3s}.hidden-catalog[data-v-2c3c7f20]{padding:15px 0;max-width:0;overflow:hidden}",""])},273:function(t,e,o){"use strict";o.r(e);o(17),o(15),o(13),o(53),o(242);var n=o(0),r=(o(10),o(9),o(43),o(19),o(2)),c=o(7),l=o(1),h=o(3),d=o(132),f=o(246),m=o(270),k=o(271),x=o(27),y={data:function(){return{isRecently:""}},methods:{toCreateNote:function(t){var e=$nuxt._route.params,o=e.user,n=e.book,r=e.pathMatch,c=void 0===r?"":r;this.$emit("toCreateFile"),this.$router.push("/".concat(o,"/").concat(n,"/").concat(c,"?type=dir&new=1"))}},mounted:function(){var t=$nuxt._route.params.catalogId;this.isRecently=t===x.a.recentlyArticlesKey}},O=(o(265),o(8)),_=Object(O.a)(y,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data flex direction-column justify-content-center align-items-center"},[e("i",{staticClass:"iconfont icon-wushuju"}),this._v(" "),e("div",[this._v("还没任何有笔记"),this.isRecently?this._e():e("span",[this._v("，"),e("span",{staticClass:"create-btn",on:{click:this.toCreateNote}},[this._v("快速创建")])])])])},[],!1,null,"d54bfff4",null).exports,N=o(247),v=o(33);o(6);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(source,!0).forEach(function(e){Object(n.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var E,T,A,j,P,$={fetch:(P=Object(r.a)(regeneratorRuntime.mark(function t(e){var o,n,r,c,l,h,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.store,n=e.params,r=n.user,c=n.book,l=n.pathMatch,!e.route.query.new){t.next=4;break}return t.abrupt("return");case 4:if(h=Object(v.a)(l),d="".concat(r,"/").concat(c,"/").concat(l,".md"),o.commit("books/BOOK_CUR_UPDATE",c),"dir"!==e.route.query.type){t.next=10;break}return o.commit("catalogs/CATALOGS_CUR_SAVE","".concat(c,"/").concat(l)),t.abrupt("return");case 10:if(o.commit("catalogs/CATALOGS_CUR_SAVE","".concat(c,"/").concat(h)),o.commit("notes/NOTE_CUR_UPDATE",d),!o.state.notesMap||!o.state.notesMap[d]){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,Promise.all([o.dispatch("catalogs/CATALOGS_GET",{path:h,getChild:!1,bookName:c}),o.dispatch("notes/NOTE_DES_GET",{fullPath:d,path:l+".md",user:r,repo:c})]);case 16:t.sent;case 17:case"end":return t.stop()}},t)})),function(t){return P.apply(this,arguments)}),components:{TreeItem:f.a,NoteBrief:m.a,noteDes:k.a,articleFixed:N.a,bookId:"",catalogId:"",noteId:"",noNotes:_},data:function(){return{noData:!1,newFileNode:null,routerParams:{}}},head:function(){var t=this.routerParams,e=(t.user,t.book),o=[t.pathMatch||e],n=[].concat(o,[this.curUserInfo.username]),r="";return this.curEditNote.contentMD&&(r=this.curEditNote.contentMD.slice(0,150)),{title:Object(v.d)(n.join("-")),meta:[{hid:"keywords",name:"keywords",content:o.join(",")},{hid:"description",name:"description",content:r}]}},computed:w({},Object(c.e)({schemaList:function(t){return t.schema.list},noteList:function(t){return t.notes.list},notesMap:function(t){return t.notes.notesMap},curBook:function(t){return t.books.curBook},curNote:function(t){return t.notes.curNote},showDir:function(t){return t.config.showDir},curCatalog:function(t){return t.catalogs.curCatalog},catalogs:function(t){return t.catalogs.list},catalogMapNotes:function(t){return t.catalogs.catalogMapNotes},curUserInfo:function(t){return t.user.curUserInfo},pageExtend:function(t){return t.config.extend}}),{},Object(c.c)("catalogs",["treeChainList"]),{},Object(c.c)("user",["isVisitor","githubName"]),{curNoteList:function(){return this.curCatalog&&this.catalogMapNotes&&this.catalogMapNotes[this.curCatalog]||[]},curEditNote:function(){var t=this.notesMap[this.curNote];return this.newFileNode?w({},this.newFileNode):w({},t)||{}}}),methods:w({},Object(c.d)("catalogs",[l.CATALOGS_CUR_SAVE,l.CATALOGS_CACHE_SAVE]),{},Object(c.d)("notes",[l.NOTE_CUR_UPDATE]),{},Object(c.d)("books",[l.BOOK_CUR_UPDATE]),{},Object(c.b)("books",[h.BOOK_LIST_GET]),{},Object(c.b)("notes",[h.NOTES_RECENTLY_GET,h.NOTES_GET,h.NOTE_DES_GET]),{},Object(c.b)("catalogs",[h.CATALOGS_GET]),{},Object(c.b)("user",[h.USER_INFO_GET]),{getNoteData:(j=Object(r.a)(regeneratorRuntime.mark(function t(){var e,o,n,r,c,l,d,f=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=[this[h.BOOK_LIST_GET](),this[h.CATALOGS_GET]()],"dir"===$nuxt._route.query.type||this.notesMap[this.curNote]||(o=$nuxt._route.params,n=o.user,r=o.book,c=o.pathMatch,l=void 0===c?"":c,d="".concat(n,"/").concat(r,"/").concat(l),e.push(this[h.NOTE_DES_GET]({fullPath:d,path:l+".md",user:n,repo:r}))),this.$showLoading(),Promise.all(e).then(function(t){var e=t.find(function(t){return t.err});e&&e.err?f.$alert({title:"getBookData",content:e.err.message}):"dir"===$nuxt._route.query.type&&($nuxt._route.query.new?f.todoCreateNewFile():f.catalogMapNotes[f.curCatalog]&&f.catalogMapNotes[f.curCatalog].length?f.$router.push("/".concat(f.githubName,"/").concat(Object(v.e)(f.catalogMapNotes[f.curCatalog][0].fullPath))):f.noData=!0)}).catch(function(t){f.$alert({title:"getBookData",content:t.message})}).finally(function(){f.$hideLoading()});case 4:case"end":return t.stop()}},t,this)})),function(){return j.apply(this,arguments)}),todoCreateNewFile:function(){this.noData=!1,this.newFileNode={repo:this.curBook,path:this.curCatalog===this.curBook?"":this.curCatalog.replace("".concat(this.curBook,"/"),""),newFile:!0}},toCreateNote:function(t){this[l.NOTE_CUR_UPDATE]("NEW"),this.$router.push("/".concat(this.githubName,"/").concat(this.curCatalog,"?type=dir&new=1"))},doChooseCatalog:function(t){this.catalogMapNotes[t.fullPath]&&this.catalogMapNotes[t.fullPath].length?this.$router.push("/".concat(this.githubName,"/").concat(Object(v.e)(this.catalogMapNotes[t.fullPath][0].fullPath))):this.$router.push("/".concat(this.githubName,"/").concat(t.fullPath,"?type=dir"))},doUpdateNote:(A=Object(r.a)(regeneratorRuntime.mark(function t(){var e,o,n,r,c,d,f,m=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.length>0&&void 0!==m[0]?m[0]:{},o=e.force,n=[Promise.resolve({})],(e.newFile||e.modify)&&n.push(this[h.NOTE_DES_GET]({force:o,user:this.githubName,repo:this.curBook,path:e.path})),(e.newFile||e.delete)&&(r=this.catalogs[this.curCatalog]&&this.catalogs[this.curCatalog].rootModifyPath||"",n.push(this[h.CATALOGS_GET]({force:o,path:r}))),this.$showLoading(),t.next=8,Promise.all(n);case 8:if(c=t.sent,this.$hideLoading(),(d=c.find(function(t){return t.err}))&&d.err&&this.$toast("重新接取数失败"),!e.newFile){t.next=17;break}this.newFileNode=null,this.$router.push("/".concat(this.githubName,"/").concat(this.curBook,"/").concat(Object(v.e)(e.path))),t.next=23;break;case 17:if(!e.delete){t.next=23;break}if(this.curNote.indexOf(e.path)===this.curNote.length-e.path.length){t.next=20;break}return t.abrupt("return");case 20:this[l.CATALOGS_CACHE_SAVE](),f=this.findHasFileDir("".concat(this.curBook,"/").concat(Object(v.a)(e.path))),this.$router.push("/".concat(this.githubName,"/").concat(f,"?type=dir"));case 23:case"end":return t.stop()}},t,this)})),function(){return A.apply(this,arguments)}),findHasFileDir:function(path){for(;path&&!this.catalogs[path];)path=Object(v.a)(path);return path},initEmitOn:function(){var t=this;d.a.$off("emitToCreateArticle"),d.a.$off("updateCurBooks"),d.a.$off("emitFromCatalog"),d.a.$on("emitToCreateArticle",function(e){t.toCreateNote(e)}),d.a.$on("emitFromCatalog",function(e){e.isNew?t.toCreateNote({catalogId:e.catalogId}):t.doChooseCatalog(e)}),d.a.$on("updateCurBooks",function(){t[l.CATALOGS_CUR_SAVE](x.a.recentlyArticlesKey),t.getNoteData()})},init:(T=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.getNoteData(),this.initEmitOn();case 2:case"end":return t.stop()}},t,this)})),function(){return T.apply(this,arguments)}),dealParams:(E=Object(r.a)(regeneratorRuntime.mark(function t(){var e,o,n,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.routerParams=$nuxt._route.params,e=$nuxt._route.params,o=e.user,n=e.book,r=e.pathMatch,c=void 0===r?"":r,this[l.BOOK_CUR_UPDATE](n),"dir"===$nuxt._route.query.type?this[l.CATALOGS_CUR_SAVE]("".concat(n,"/").concat(c)):(this[l.CATALOGS_CUR_SAVE]("".concat(n,"/").concat(Object(v.a)(c))),this[l.NOTE_CUR_UPDATE]("".concat(o,"/").concat(n,"/").concat(c,".md"))),this.noteId=c,this.pathMatch=c,this.init();case 7:case"end":return t.stop()}},t,this)})),function(){return E.apply(this,arguments)})}),mounted:function(){this.dealParams()}},D=(o(267),Object(O.a)($,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex flex-1"},[t.isVisitor?t._e():o("div",{staticClass:"catalog-layout box-shadow",class:{"hidden-catalog":!t.showDir}},[o("TreeItem")],1),t._v(" "),o("NoteBrief",{attrs:{list:t.curNoteList},on:{emitToCreateNote:t.toCreateNote,emitUpdateNote:t.doUpdateNote}}),t._v(" "),t.noData?o("noNotes",{on:{toCreateFile:t.todoCreateNewFile}}):o("note-des",{attrs:{curNote:t.curEditNote,newFileNode:t.newFileNode},on:{emitUpdateNote:t.doUpdateNote}}),t._v(" "),t.isVisitor?t._e():o("articleFixed")],1)},[],!1,null,"2c3c7f20",null));e.default=D.exports},316:function(t,e,o){"use strict";o.r(e);var n={name:"index",components:{noteIndex:o(273).default}},r=o(8),component=Object(r.a)(n,function(){var t=this.$createElement;return(this._self._c||t)("noteIndex")},[],!1,null,"75d7e86e",null);e.default=component.exports}}]);