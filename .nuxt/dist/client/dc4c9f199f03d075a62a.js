(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{261:function(t,e,r){var content=r(301);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("37e9fe9c",content,!0,{sourceMap:!1})},262:function(t,e,r){var content=r(303);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("416d6002",content,!0,{sourceMap:!1})},270:function(t,e,r){"use strict";r(17),r(15),r(10),r(9),r(13),r(242),r(19);var o=r(2),n=(r(32),r(0)),c=r(7),l=r(1),d=r(3),f=r(274),h=r(33);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(source,!0).forEach(function(e){Object(n.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var x,y,N,w,O={props:{curNote:{type:Object}},data:function(){var t={},e=t.title,title=void 0===e?"未命名":e,r=t.content;return{articleName:title,cacheName:title,content:void 0===r?"":r,editId:"new",schemaId:"",catalogId:"",test:"123",fields:[],contentList:[],cacheContent:"",isEditContents:!1,showList:!1,showEditContent:!1}},components:{MarkdownEdit:f.a},computed:v({},Object(c.e)({catalogs:function(t){return t.catalogs.list},curCatalog:function(t){return t.catalogs.curCatalog},catalogMapNote:function(t){return t.catalogs.catalogMapNotes},bookList:function(t){return t.books.list},articles:function(t){return t.articles.list}}),{},Object(c.c)("user",["isVisitor"]),{dataHasChange:function(){return JSON.stringify(this.content)!==JSON.stringify(this.cacheContent)}}),watch:{curNote:{handler:function(t){this.setContent(t)},immediate:!0},editId:function(t){this[l.ARTICLE_CUS_SAVE](t)}},methods:v({},Object(c.d)("articles",[l.ARTICLE_CUS_SAVE]),{},Object(c.d)("books",[l.BOOK_CUR_UPDATE]),{},Object(c.d)("notes",[l.NOTE_MAP_SAVE]),{},Object(c.b)("articles",[d.ARTICLE_DES_GET,d.ARTICLE_POST,d.ARTICLE_PUT,d.ARTICLE_CONTENT_PUT,d.ARTICLE_CONTENT_POST,d.ARTICLE_CONTENT_DELETE]),{},Object(c.b)("notes",[d.NOTE_POST,d.NOTE_PUT,d.NOTE_DELETE]),{getTitle:function(t){return t?t.substring(0,t.length-3):t},setContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cacheContent=this.content=t.contentMD||"",this.cacheName=this.articleName=this.getTitle(t.name)||"未命名"},todoEdit:(w=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r,o=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.length>0&&void 0!==o[0]&&o[0]){t.next=4;break}if(!this.curNote.newFile&&this.articleName&&this.cacheName!==this.articleName){t.next=4;break}return t.abrupt("return");case 4:if(e="".concat(Object(h.a)(this.curNote.path),"/").concat(this.articleName,".md"),!(this.articleName.indexOf(".")>-1)){t.next=8;break}return this.$toast({title:"文件不能包吃住特殊字符“.”"}),t.abrupt("return");case 8:if(!this.catalogMapNote[this.curCatalog].find(function(t){return t.path===e})){t.next=11;break}return this.$toast({title:'该目录已经存在"'.concat(this.articleName,'"')}),t.abrupt("return");case 11:r="".concat(Object(h.a)(this.curNote.path),"/").concat(this.articleName,".md"),this.doPutNote(r);case 13:case"end":return t.stop()}},t,this)})),function(){return w.apply(this,arguments)}),todoSave:(N=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.articleName){t.next=2;break}return t.abrupt("return");case 2:if(!(this.articleName.indexOf(".")>-1)){t.next=5;break}return this.$toast({title:"文件不能包吃住特殊字符“.”"}),t.abrupt("return");case 5:if(e=this.curNote.path?"".concat(this.curNote.path,"/"):"",r="".concat(e).concat(this.articleName,".md"),!this.catalogMapNote[this.curCatalog]){t.next=12;break}if(!this.catalogMapNote[this.curCatalog].find(function(t){return t.path===r})){t.next=12;break}return this.$toast({title:'该目录下已经存在"'.concat(this.articleName,'"')}),t.abrupt("return");case 12:return this.$showLoading(),t.next=15,this[d.NOTE_PUT]({content:this.content,path:r,newFile:!0});case 15:if(o=t.sent,this.$hideLoading(),!o.err){t.next=22;break}return this.$toast({title:o.err.message}),t.abrupt("return");case 22:o.err||this.$toast({title:"添加成功"}),this.cacheName=this.articleName,this.cacheContent=this.content,this.$emit("emitUpdateNote",{force:!0,path:o.data.content.path,newFile:!0});case 26:case"end":return t.stop()}},t,this)})),function(){return N.apply(this,arguments)}),toDoPutNote:(y=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isVisitor){t.next=2;break}return t.abrupt("return");case 2:if(this.dataHasChange&&!this.curNote.newFile){t.next=4;break}return t.abrupt("return");case 4:this.doPutNote();case 5:case"end":return t.stop()}},t,this)})),function(){return y.apply(this,arguments)}),doPutNote:(x=Object(o.a)(regeneratorRuntime.mark(function t(path){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isEditContents=!1,this.$showLoading(),t.next=4,this[d.NOTE_PUT]({sha:this.curNote.sha,content:this.content,path:path||this.curNote.path});case 4:if(!(e=t.sent).err){t.next=10;break}return this.$toast({title:e.err.message}),t.abrupt("return");case 10:if(!path){t.next=14;break}return t.next=13,this[d.NOTE_DELETE](this.curNote);case 13:e=t.sent;case 14:e.err?this.$toast({title:"删除旧文件失败："+e.err.message}):this.$toast({title:"修改成功"});case 15:this.$hideLoading(),this.cacheName=this.articleName,this.cacheContent=this.content,this.$emit("emitUpdateNote",{force:!0,path:path||this.curNote.path,modify:!0,newFile:!!path});case 19:case"end":return t.stop()}},t,this)})),function(t){return x.apply(this,arguments)})}),mounted:function(){}},k=(r(302),r(8)),component=Object(k.a)(O,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article-layout flex direction-column flex-1 markdown"},[r("div",{staticClass:"article-title flex "},[r("div",{staticClass:"flex-1 schema-title-layout relative"},[t.isVisitor?r("div",{staticClass:"full-input"},[t._v(t._s(t.articleName))]):r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.articleName,expression:"articleName",modifiers:{trim:!0}}],staticClass:"full-input",domProps:{value:t.articleName},on:{blur:[function(e){return t.todoEdit(!1)},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.articleName=e.target.value.trim())}}})]),t._v(" "),t.isVisitor?t._e():r("div",{staticClass:"schema-operate"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.curNote.newFile,expression:"curNote.newFile"}],staticClass:"schema-operate-btn",class:{"disable-btn":!1},on:{click:t.todoSave}},[t._v("保存")])])]),t._v(" "),r("div",{staticClass:"flex-1 flex"},[r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.toDoPutNote,expression:"toDoPutNote"}],staticClass:"article-content relative flex-1 flex",class:{noSave:t.dataHasChange},on:{click:function(e){t.isEditContents=!0},keydown:function(e){return(e.type.indexOf("key")||83===e.keyCode)&&e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.toDoPutNote(e)):null}}},[r("div",{staticClass:"flex-1 relative"},[r("div",{staticClass:"form-layout theme-1"},[r("markdown-edit",{attrs:{onlyView:t.isVisitor,showEdit:t.curNote.newFile},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])])])])},[],!1,null,"082f6fde",null);e.a=component.exports},271:function(t,e,r){"use strict";r(17),r(15),r(10),r(9),r(13),r(19);var o=r(2),n=(r(32),r(0)),c=r(7),l=r(298),d=r.n(l),f=r(1),h=r(3),m=(r(132),r(27),r(33));function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,r)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(source,!0).forEach(function(e){Object(n.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var y,N={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{filterKeys:"",filterList:[],drag:!1}},components:{draggable:d.a},computed:x({},Object(c.e)({curCatalog:function(t){return t.catalogs.curCatalog},showBrief:function(t){return t.config.showBrief},bookList:function(t){return t.books.list},schemaList:function(t){return t.schema.list},curNote:function(t){return t.notes.curNote},notesMap:function(t){return t.notes.notesMap},curBook:function(t){return t.books.curBook}}),{},Object(c.c)("user",["isVisitor","githubName"]),{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}),watch:{list:function(t){t.length&&(!this.curNode||this.curNode),this.getList()},filterKeys:function(t){this.getList()}},filters:{getBookName:function(t,e){return e[t]?e[t].name:""},getCatalogsName:function(t,e){return e[t]?e[t].name:""}},methods:x({},Object(c.b)("notes",[h.NOTE_DELETE]),{},Object(c.d)("notes",[f.NOTE_CUR_UPDATE]),{chooseNote:function(t){this.curNote!=="".concat(this.githubName,"/").concat(t.fullPath)&&this.$router.push("/".concat(this.githubName,"/").concat(t.repo,"/").concat(Object(m.e)(t.path)))},todoDelete:function(t){var e=this;this.$alert({title:'你确认要删除"'.concat(t.name,'"')}).then(function(){var r=Object(o.a)(regeneratorRuntime.mark(function r(o){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o&&e.doDeleteNote(t);case 1:case"end":return r.stop()}},r)}));return function(t){return r.apply(this,arguments)}}())},doDeleteNote:(y=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r,o=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},this.$showLoading(),t.next=4,this[h.NOTE_DELETE](e);case 4:r=t.sent,this.$hideLoading(),r.err||this.$toast({title:"删除成功"}),this.$emit("emitUpdateNote",{force:!0,path:e.path,delete:!0});case 8:case"end":return t.stop()}},t,this)})),function(){return y.apply(this,arguments)}),shortcutAdd:function(){this.$emit("emitToCreateNote")},dragEnd:function(){this.drag=!1,console.log(this.filterList)},getList:function(){var t=this;this.filterKeys||(this.filterList=this.list),this.filterList=this.list.filter(function(e){return e.name.indexOf(t.filterKeys)>-1}).map(function(t){return x({},t)})},isAct:function(path){return this.curNote.indexOf(path)>-1}}),mounted:function(){this.getList()}},w=(r(300),r(8)),component=Object(w.a)(N,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article-layout box-shadow flex direction-column",class:{"hidden-article":!t.showBrief}},[r("div",{staticClass:"flex-1 flex direction-column article-min-width relative"},[r("div",{staticClass:"article-layout-input-box align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKeys,expression:"filterKeys"}],staticClass:"article-layout-input",attrs:{type:"text"},domProps:{value:t.filterKeys},on:{input:function(e){e.target.composing||(t.filterKeys=e.target.value)}}}),t._v(" "),r("i",{staticClass:"iconfont icon-sousuo"})]),t._v(" "),r("div",{staticClass:"flex-1 relative"},[r("div",{staticClass:"absolute-full article-item-box",attrs:{id:"article-item-box"}},[r("draggable",t._b({attrs:{group:"people",handle:".operate-icon-sort"},on:{start:function(e){t.drag=!0},end:t.dragEnd},model:{value:t.filterList,callback:function(e){t.filterList=e},expression:"filterList"}},"draggable",t.dragOptions,!1),[r("transition-group",{attrs:{type:"transition",name:t.drag?null:"flip-list"}},t._l(t.filterList,function(e,o){return r("div",{key:e.sha+o,staticClass:"article-item",class:{act:t.isAct(e.path)},attrs:{id:e._id},on:{click:function(r){return t.chooseNote(e)}}},[r("div",{staticClass:"article-item-title"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"article-label"},[r("span",{staticClass:"article-label-item"},[t._v(t._s(e.path))])]),t._v(" "),r("div",{staticClass:"operate-icon operate-icon-delete",on:{click:function(r){return r.stopPropagation(),t.todoDelete(e)}}},[r("i",{staticClass:"iconfont icon-shanchu1"})]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.filterKeys,expression:"!filterKeys"}],staticClass:"operate-icon operate-icon-sort",on:{click:function(r){return r.stopPropagation(),t.todoDelete(e)}}},[r("i",{staticClass:"iconfont icon-paixu"})])])}),0)],1)],1)]),t._v(" "),t.notesMap[t.curNote]&&!t.isVisitor?r("div",{staticClass:"shortcut-add-layout",on:{click:t.shortcutAdd}},[r("i",{staticClass:"iconfont icon-tianjiawenjian"})]):t._e()])])},[],!1,null,"36f1d856",null);e.a=component.exports},300:function(t,e,r){"use strict";var o=r(261);r.n(o).a},301:function(t,e,r){(t.exports=r(11)(!1)).push([t.i,'[data-v-36f1d856]:root{--text-color:red}.article-item[data-v-36f1d856]{padding:10px 20px;width:100%;cursor:pointer;position:relative;border-bottom:1px solid #000}.article-item .article-item-title[data-v-36f1d856]{font-size:17px;color:#ddd}.article-item .article-item-mark[data-v-36f1d856]{margin-top:7px;font-size:12px}.article-item .operate-icon[data-v-36f1d856]{width:30px;height:30px;border-radius:50%;position:absolute;z-index:1;background:#5f5f5f;opacity:0;transform:scale(0);transition:.3s;text-align:center;line-height:30px;color:#19181d}.article-item .operate-icon .iconfont[data-v-36f1d856]{font-size:18px}.article-item .operate-icon-delete[data-v-36f1d856]{right:7px;top:7px}.article-item .operate-icon-sort[data-v-36f1d856]{right:7px;bottom:7px;cursor:move}.article-item .operate-icon-delete[data-v-36f1d856]:hover{background:#f4606c;color:#fff}.article-item .operate-icon-sort[data-v-36f1d856]:hover{background:#398dee;color:#fff}.article-item:hover .operate-icon[data-v-36f1d856]{opacity:1;transform:scale(1)}.article-item.act[data-v-36f1d856]{background:#19181d}.article-item.act[data-v-36f1d856]:after{content:"";position:absolute;width:4px;height:100%;left:0;top:0;background:#afb0b1}.article-layout[data-v-36f1d856]{padding:15px 0;background:#2d2d2d;color:#919191;max-width:500px;transition:.3s}.article-layout .article-min-width[data-v-36f1d856]{min-width:200px}.article-layout.hidden-article[data-v-36f1d856]{max-width:0;overflow:hidden}.article-layout-input-box[data-v-36f1d856]{background:#5f5f5f;color:#ddd;width:90%;height:40px;padding:0 10px;position:relative;margin:0 auto 10px}.article-layout-input-box .iconfont[data-v-36f1d856]{display:block;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.article-layout-input[data-v-36f1d856]{height:100%;border:none;background:transparent;display:inline-block;color:#ddd;outline:#fff;padding-right:46px}.article-label[data-v-36f1d856]{margin:7px 0}.article-label-item[data-v-36f1d856]{display:inline-block;padding:2px 5px;background:#5f5f5f;color:#202020;border-radius:2px;margin-bottom:3px;font-size:12px}.article-item-box[data-v-36f1d856]{overflow-y:auto;overflow-x:hidden}.shortcut-add-layout[data-v-36f1d856]{position:absolute;bottom:10px;right:10px;background:#398dee;z-index:5;width:42px;height:42px;border-radius:42px;cursor:pointer;text-align:center;line-height:44px}.shortcut-add-layout .iconfont[data-v-36f1d856]{font-size:30px;color:#2d2d2d}.flip-list-move[data-v-36f1d856]{transition:transform .5s}.no-move[data-v-36f1d856]{transition:transform 0s}.ghost[data-v-36f1d856]{opacity:.5;background:#c8ebfb}',""])},302:function(t,e,r){"use strict";var o=r(262);r.n(o).a},303:function(t,e,r){(t.exports=r(11)(!1)).push([t.i,"[data-v-082f6fde]:root{--text-color:red}.article-layout[data-v-082f6fde]{background:#eee;position:relative}.article-layout .form-label-layout[data-v-082f6fde]{width:100%;text-align:left;font-size:12px;color:#adabab;padding-left:0}.article-layout .form-content-layout[data-v-082f6fde]{background:#fff;padding:7px 20px}.article-layout .add-options-item[data-v-082f6fde]{margin:5px}.article-layout .form-input[data-v-082f6fde],.article-layout .from-select[data-v-082f6fde]{border:none;outline:none;padding:0}.article-layout .form-group[data-v-082f6fde]:not(:first-child){margin:0}.article-layout .form-content-layout-select[data-v-082f6fde]{padding-top:18px;padding-bottom:18px}.article-layout .markdown-layout[data-v-082f6fde]{min-height:500px;padding:10px}.article-layout-theme1 .article-content[data-v-082f6fde]{padding:40px}.article-layout-theme1 .form-label-layout[data-v-082f6fde]{display:none}.article-layout-theme1 .form-input[data-v-082f6fde],.article-layout-theme1 .from-select[data-v-082f6fde]{border:none;outline:none;font-size:20px}.article-title[data-v-082f6fde]{border-bottom:1px solid #e1e4e8;background:#fff;height:45px;line-height:45px;padding:0 15px}.article-title .operate-list-operate .iconfont[data-v-082f6fde]{font-size:20px;cursor:pointer}.article-title .operate-list-operate .icon-box[data-v-082f6fde]{border:1px solid #919191;border-radius:50%;width:30px;height:30px;line-height:30px;text-align:center;display:inline-block}.article-title .operate-list-operate .icon-box.act[data-v-082f6fde]{background:#398dee;color:#fff}.article-content[data-v-082f6fde]{padding:7px}.full-input[data-v-082f6fde]{font-size:17px;outline:none;color:#5f5f5f}.markdown .form-label-layout[data-v-082f6fde]{display:none}.markdown .article-content[data-v-082f6fde],.markdown .markdown-layout[data-v-082f6fde]{padding:0}.markdown .scroll-box[data-v-082f6fde]{overflow:hidden}.markdown .form-group[data-v-082f6fde],.markdown .form-layout[data-v-082f6fde]{height:100%}.article-content.noSave[data-v-082f6fde]{border:1px solid #f4606c}.schema-operate-btn[data-v-082f6fde]{height:30px;line-height:30px;width:80px;text-align:center;background:#202020;color:#fff;display:inline-block;border-radius:2px;font-size:14px;cursor:pointer}",""])}}]);