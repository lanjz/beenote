(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{261:function(t,e,o){var content=o(495);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(13).default)("659a64a6",content,!0,{sourceMap:!1})},262:function(t,e,o){var content=o(497);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(13).default)("f85336d6",content,!0,{sourceMap:!1})},263:function(t,e,o){var content=o(499);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(13).default)("55d9ff12",content,!0,{sourceMap:!1})},264:function(t,e,o){var content=o(501);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(13).default)("9f8000d6",content,!0,{sourceMap:!1})},491:function(t,e,o){"use strict";var r=o(16),n=o(35),c=o(40),l=o(136),d=o(85),f=o(26),h=o(54).f,m=o(86).f,v=o(24).f,y=o(492).trim,C=r.Number,O=C,x=C.prototype,_="Number"==c(o(104)(x)),N="trim"in String.prototype,w=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var o,r,n,c=(e=N?e.trim():y(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(o=e.charCodeAt(2))||120===o)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+e}for(var code,l=e.slice(2),i=0,f=l.length;i<f;i++)if((code=l.charCodeAt(i))<48||code>n)return NaN;return parseInt(l,r)}}return+e};if(!C(" 0o1")||!C("0b1")||C("+0x1")){C=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof C&&(_?f(function(){x.valueOf.call(o)}):"Number"!=c(o))?l(new O(w(e)),o,C):w(e)};for(var k,E=o(21)?h(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;E.length>T;T++)n(O,k=E[T])&&!n(C,k)&&v(C,k,m(O,k));C.prototype=x,x.constructor=C,o(27)(r,"Number",C)}},492:function(t,e,o){var r=o(20),n=o(39),c=o(26),l=o(493),d="["+l+"]",f=RegExp("^"+d+d+"*"),h=RegExp(d+d+"*$"),m=function(t,e,o){var n={},d=c(function(){return!!l[t]()||"​"!="​"[t]()}),f=n[t]=d?e(v):l[t];o&&(n[o]=f),r(r.P+r.F*d,"String",n)},v=m.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(f,"")),2&e&&(t=t.replace(h,"")),t};t.exports=m},493:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},494:function(t,e,o){"use strict";var r=o(261);o.n(r).a},495:function(t,e,o){(t.exports=o(12)(!1)).push([t.i,'[data-v-2339dd11]:root{--text-color:red}.iconfont[data-v-2339dd11]{font-size:25px;position:relative;z-index:1}.catalogs-item-layout[data-v-2339dd11]{cursor:pointer;padding:7px 25px;position:relative;transition:.3s}.catalogs-item-layout .icon-open[data-v-2339dd11]{display:none}.catalogs-item-layout .icon-close[data-v-2339dd11]{display:block}.catalogs-item-layout[data-v-2339dd11]:after{content:"";background:transparent;position:absolute;top:0;width:100%;height:100%;left:-100%;transition:.3s}.catalogs-item-layout[data-v-2339dd11]:hover,.catalogs-item-layout[data-v-2339dd11]:hover:after{background:#e1e4e8}.catalogs-item-layout.act[data-v-2339dd11]{background:#2d2d2d;color:#fff}.catalogs-item-layout.act .icon-open[data-v-2339dd11]{display:block}.catalogs-item-layout.act .icon-close[data-v-2339dd11]{display:none}.catalogs-item-layout.act[data-v-2339dd11]:after,.catalogs-item-layout.act[data-v-2339dd11]:hover,.catalogs-item-layout.act[data-v-2339dd11]:hover:after{background:#2d2d2d}.catalogs-name[data-v-2339dd11],.edit-catalogs-input[data-v-2339dd11]{position:relative;z-index:1;max-width:150px;padding:0 5px}.edit-catalogs-input[data-v-2339dd11]{background:transparent;vertical-align:bottom;border:none;color:inherit;font-size:inherit;height:25px}.catalog-operate-layout[data-v-2339dd11]{position:fixed;background:rgba(0,0,0,.8);left:50%;top:50%;color:#fff;z-index:999;border-radius:5px;overflow:hidden}.catalog-operate-layout .catalog-operate-item[data-v-2339dd11]{width:150px;padding:10px 20px}.catalog-operate-layout .catalog-operate-item[data-v-2339dd11]:not(:last-child){border-bottom:1px solid #e1e4e8}',""])},496:function(t,e,o){"use strict";var r=o(262);o.n(r).a},497:function(t,e,o){(t.exports=o(12)(!1)).push([t.i,"[data-v-cf6fdb9a]:root{--text-color:red}.catalogs-layout .catalogs-layout[data-v-cf6fdb9a]{padding-left:20px}",""])},498:function(t,e,o){"use strict";var r=o(263);o.n(r).a},499:function(t,e,o){(t.exports=o(12)(!1)).push([t.i,"[data-v-f82a8312]:root{--text-color:red}.no-data[data-v-f82a8312]{flex:1;font-size:20px;text-align:center;color:#7e8896;padding:25% 20px 20px}.no-data .iconfont[data-v-f82a8312]{font-size:100px}.no-data .create-btn[data-v-f82a8312]{color:#398dee;cursor:pointer}",""])},500:function(t,e,o){"use strict";var r=o(264);o.n(r).a},501:function(t,e,o){(t.exports=o(12)(!1)).push([t.i,"[data-v-04a170f4]:root{--text-color:red}.visitor-content[data-v-04a170f4]{padding-top:70px}.book-slider-layout[data-v-04a170f4]{padding:15px;background:#2d2d2d}.book-layout[data-v-04a170f4]{margin-top:40px;width:38px;height:38px;cursor:pointer;position:relative;z-index:1}.book-layout .book-icon-layout[data-v-04a170f4]{line-height:38px;width:100%;height:100%;text-align:center;border-radius:50%;background:#fff;overflow:hidden;position:relative}.book-layout .iconfont[data-v-04a170f4]{font-size:26px}.book-layout .book-list-layout[data-v-04a170f4]{max-width:300px;padding:7px 20px;background:#2d2d2d;position:absolute;left:100%;top:0;transition:.3s;transform:scale(0);transform-origin:0 15px}.book-layout .book-list-layout .book-list-item-layout[data-v-04a170f4]{color:#fff;text-align:center}.book-layout .book-list-layout .book-list-item-layout .icon[data-v-04a170f4]{width:25px;height:25px;line-height:22px;border:1px solid #fff;border-radius:50%}.book-layout .book-list-layout .book-list-item-layout .icon .iconfont[data-v-04a170f4]{font-size:16px}.book-layout .book-list-layout .book-list-item-layout .book-name[data-v-04a170f4]{font-size:12px;margin-left:10px}.book-layout .book-list-layout .book-list-item-layout[data-v-04a170f4]:not(:last-child){margin-bottom:10px}.book-layout .book-list-layout .book-list-item-layout.act .icon[data-v-04a170f4]{border:1px solid #398dee;background:#398dee}.show-book-list:hover .book-list-layout[data-v-04a170f4]{transform:scale(1)}.book-layout.act[data-v-04a170f4]{transform:scale(1.2)}.book-layout.act .book-icon-layout[data-v-04a170f4]{background:#398dee}.book-layout.act .book-icon-layout .iconfont[data-v-04a170f4]{color:#fff}.book-layout[data-v-04a170f4]:not(:last-child){margin-bottom:10px}.catalog-layout[data-v-04a170f4]{padding:15px 2px;overflow:auto;background:#202020;color:#919191;width:200px;max-width:200px;transition:.3s;position:relative;height:100%}.catalog-layout-isVisitor[data-v-04a170f4]{position:fixed;left:0;width:280px;max-width:280px;top:70px;bottom:0;background:#fff;color:#777;border-right:1px solid #e9e7e7;z-index:2}.hidden-catalog[data-v-04a170f4]{padding:15px 0;max-width:0;overflow:hidden}.page-left-visitor[data-v-04a170f4],.page-right[data-v-04a170f4]{width:280px}.visitor-left[data-v-04a170f4]{padding-right:6px}",""])},504:function(t,e,o){"use strict";o.r(e);o(18),o(15),o(14),o(46),o(135),o(84);var r=o(0),n=(o(10),o(9),o(45),o(19),o(2)),c=o(7),l=o(1),d=o(4),f=o(134),h=o(266),m=o(23),v=(o(32),o(491),{name:"TreeItem",props:{curCatalog:{type:Object,default:function(){return{}}},item:{type:Object,require:!0},index:{type:Number,require:!0},isNewDir:{type:Boolean,default:function(){return!1}}},data:function(){return{renameCatalog:!1,operateMenuStyle:{left:-1,top:"50%"},renameValue:""}},methods:{chooseCatalog:function(data,t){this.$emit("emitChooseCatalog",data,t)},showOperateMenu:function(t){var e=t.clientX,o=t.clientY;this.operateMenuStyle={top:"".concat(o,"px"),left:"".concat(e,"px")}},closeMenu:function(){this.operateMenuStyle.left=-1},todoRename:function(){this.renameValue=this.item.name,this.closeMenu(),this.renameCatalog=!0},doRename:function(){this.renameCatalog=!1,this.isNewDir?this.$emit("emitSubmitCatalogName",this.renameValue,this.item):this.renameValue&&this.renameValue!==this.item.name&&this.$emit("emitSubmitCatalogName",this.renameValue,this.item)},todoCreateTemDir:function(){this.closeMenu(),this.$emit("emitDoCreateTemDir",this.item)}},mounted:function(){var t=this;this.isNewDir&&this.todoRename(),document.addEventListener("click",function(e){t.$el.contains(e.target)})}}),y=(o(494),o(8)),C=Object(y.a)(v,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"flex align-items-center catalogs-item-layout",class:{act:t.curCatalog._id===t.item._id},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.chooseCatalog(t.item,t.index)},contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),o=e,t.showOperateMenu(o,t.item,t.index);var o}}},[o("div",{staticClass:"iconfont"},[o("svg",{staticClass:"icon icon-close",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-wenjian2"}})]),t._v(" "),o("svg",{staticClass:"icon  icon-open",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-wenjian-"}})])]),t._v(" "),t.item.isNew||t.renameCatalog?o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.renameValue,expression:"renameValue",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus:select",arg:"select"}],staticClass:"edit-catalogs-input line-ellipsis",domProps:{value:t.renameValue},on:{blur:[t.doRename,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.renameValue=e.target.value.trim())}}}):o("div",{staticClass:"catalogs-name line-ellipsis"},[t._v(t._s(t.item.name))]),t._v(" "),-1!==t.operateMenuStyle.left?o("div",{staticClass:"catalog-operate-layout",style:t.operateMenuStyle},[o("div",{staticClass:"catalog-operate-item",on:{click:t.todoCreateTemDir}},[t._v("新建文件夹")]),t._v(" "),o("div",{staticClass:"catalog-operate-item",on:{click:t.todoRename}},[t._v("重命名")]),t._v(" "),o("div",{staticClass:"catalog-operate-item"},[t._v("删除")])]):t._e()])},[],!1,null,"2339dd11",null).exports;function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var _,N,w,k={name:"Tree",props:{parentId:{type:String,require:!0},treeNode:{type:Array,default:function(){return[]}},isNewDir:{type:Boolean,default:function(){return!1}}},components:{TreeItem:C},data:function(){return{operateMenuStyle:{left:-1,top:"50%"},newDir:{parentId:"",name:"新建文件夹",show:!1,isNew:!0}}},computed:x({},Object(c.e)({catalogs:function(t){return t.catalogs.catalogs},curCatalog:function(t){return t.catalogs.curCatalog}})),methods:x({},Object(c.d)([l.CATALOGS_CUR_SAVE,l.CATALOGS_TEMPLATE_CREATE]),{},Object(c.b)([d.CATALOGS_GET,d.CATALOGS_PUT,d.CATALOGS_POST]),{getDate:(w=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this[d.CATALOGS_GET]({parentId:this.parentId});case 2:case"end":return t.stop()}},t,this)})),function(){return w.apply(this,arguments)}),init:function(){this.isNewDir||this.getDate()},isNewCondition:function(t){return this.newDir.parentId===t._id},chooseCatalog:function(data,t){this[l.CATALOGS_CUR_SAVE]({data:data,treeNode:this.getTreeNode(data,t)})},getTreeNode:function(data,t){return[].concat(Object(m.a)(this.treeNode),[x({},data,{showIndex:t})])},showOperateMenu:function(t){var e=t.offsetX,o=t.offsetY;this.operateMenuStyle={top:"".concat(o,"px"),left:"".concat(e,"px")}},submitCatalogName:function(t,e){e.isNew?this.addCatalog(t,e):this.modifyCatalogName(t,e)},modifyCatalogName:(N=Object(n.a)(regeneratorRuntime.mark(function t(e,o){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o._id,t.next=3,this[d.CATALOGS_PUT]({id:r,name:e});case 3:t.sent.err||this.getDate();case 5:case"end":return t.stop()}},t,this)})),function(t,e){return N.apply(this,arguments)}),addCatalog:(_=Object(n.a)(regeneratorRuntime.mark(function t(e,o){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.parentId,t.next=3,this[d.CATALOGS_POST]({parentId:r,name:e});case 3:n=t.sent,this.newDir.parentId="",n.err||this.getDate();case 6:case"end":return t.stop()}},t,this)})),function(t,e){return _.apply(this,arguments)}),doCreateTemDir:function(t){var e=t._id;this.newDir.parentId=e}}),mounted:function(){this.init()}},E=(o(496),Object(y.a)(k,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"catalogs-layout"},[t.isNewDir?o("div",{attrs:{abc:t.isNewDir}},[o("TreeItem",{attrs:{item:t.newDir,curCatalog:t.curCatalog,isNewDir:t.isNewDir},on:{emitChooseCatalog:t.chooseCatalog,emitSubmitCatalogName:t.submitCatalogName,emitDoCreateTemDir:t.doCreateTemDir}})],1):t._e(),t._v(" "),t._l(t.catalogs[t.parentId],function(e,r){return t.catalogs[t.parentId]?o("div",{key:r},[o("TreeItem",{attrs:{item:e,index:r,curCatalog:t.curCatalog},on:{emitChooseCatalog:t.chooseCatalog,emitSubmitCatalogName:t.submitCatalogName,emitDoCreateTemDir:t.doCreateTemDir}}),t._v(" "),t.newDir.parentId===e._id||e.hasChild?o("Tree",{attrs:{parentId:e._id,treeNode:t.getTreeNode(e,r),isNewDir:t.isNewCondition(e)}}):t._e()],1):t._e()})],2)},[],!1,null,"cf6fdb9a",null).exports),T=o(267),A=o(269),S=o(268),j=o(33);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}var P={data:function(){return{}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}({},Object(c.c)("user",["isVisitor"])),methods:{toCreateNote:function(t){this.$emit("toCreateFile")}},mounted:function(){}},M=(o(498),Object(y.a)(P,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data"},[e("i",{staticClass:"iconfont icon-wushuju"}),this._v(" "),this.isVisitor?e("div",[this._v("当前目录还没有笔记")]):e("div",[this._v("还没任何有笔记，"),e("span",{staticClass:"create-btn",on:{click:this.toCreateNote}},[this._v("快速创建")])])])},[],!1,null,"f82a8312",null).exports),I=o(28);o(6);function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}function U(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(source,!0).forEach(function(e){Object(r.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var V,G,L,$,F,B={fetch:(F=Object(n.a)(regeneratorRuntime.mark(function t(e){var o,r,n,c,l,d,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.store,r=e.params,n=r.user,c=r.book,l=r.pathMatch,!e.route.query.new){t.next=4;break}return t.abrupt("return");case 4:if(o.commit("books/BOOK_CUR_UPDATE",c),"dir"!==e.route.query.type){t.next=8;break}return o.commit("catalogs/CATALOGS_CUR_SAVE","".concat(c,"/").concat(l)),t.abrupt("return");case 8:if(d=Object(I.b)(l),f="".concat(n,"/").concat(c,"/").concat(l,".md"),o.commit("catalogs/CATALOGS_CUR_SAVE","".concat(c,"/").concat(d)),o.commit("notes/NOTE_CUR_UPDATE",f),!o.state.notes.notesMap||!o.state.notes.notesMap[f]){t.next=14;break}return t.abrupt("return");case 14:return h=[o.dispatch("notes/NOTE_DES_GET",{fullPath:f,path:l+".md",user:n,repo:c})],o.state.user.curUserInfo.gitName,o.state.user.loginUserInfo.gitName,e.route.query.view,e.route.query.view&&o.commit("user/VIEW_STATUS_SAVE",!0),t.next=20,Promise.all(h);case 20:case"end":return t.stop()}},t)})),function(t){return F.apply(this,arguments)}),components:{TreeItem:h.a,NoteBrief:A.a,noteDes:S.a,noNotes:M,Catalogue:T.a,VisitorTreeItem:E},data:function(){return{noData:!1,newFileNode:null,routerParams:{}}},head:function(){var t=this.routerParams,e=(t.user,t.book),o=[t.pathMatch||e],r=[].concat(o,[this.curUserInfo.username]),n="";return this.curEditNote.contentMD&&(n=this.curEditNote.contentMD.slice(0,150)),{title:Object(I.e)(r.join("-")),meta:[{hid:"keywords",name:"keywords",content:o.join(",")},{hid:"description",name:"description",content:n}]}},computed:U({},Object(c.e)({notesMap:function(t){return t.notes.notesMap},curBook:function(t){return t.books.curBook},curNote:function(t){return t.notes.curNote},showDir:function(t){return t.config.showDir},curCatalog:function(t){return t.catalogs.curCatalog},catalogs:function(t){return t.catalogs.list},catalogMapNotes:function(t){return t.catalogs.catalogMapNotes},curUserInfo:function(t){return t.user.curUserInfo},onlyView:function(t){return t.user.onlyView}}),{},Object(c.c)("catalogs",["treeChainList"]),{},Object(c.c)("user",["isVisitor","githubName"]),{curNoteList:function(){return this.curCatalog&&this.catalogMapNotes&&this.catalogMapNotes[this.curCatalog]||[]},curEditNote:function(){var t=this.notesMap[this.curNote];return this.newFileNode?U({},this.newFileNode):U({},t)||{}}}),methods:U({},Object(c.d)("catalogs",[l.CATALOGS_CUR_SAVE,l.CATALOGS_CACHE_SAVE,l.CATALOGS_CUR_BLOG,l.CATALOGS_REMOVE]),{},Object(c.d)("notes",[l.NOTE_CUR_UPDATE]),{},Object(c.d)("books",[l.BOOK_CUR_UPDATE]),{},Object(c.d)("user",[l.CUR_USER_INFO_SAVE]),{},Object(c.b)("books",[d.BOOK_LIST_GET]),{},Object(c.b)("notes",[d.NOTES_RECENTLY_GET,d.NOTES_GET,d.NOTE_DES_GET]),{},Object(c.b)("catalogs",[d.CATALOGS_GET,d.CATALOGS_GET_CUR]),{},Object(c.b)("user",[d.USER_INFO_GET]),{getPathMatch:function(){var t=$nuxt._route.params.pathMatch,e=void 0===t?"":t,o="dir"===$nuxt._route.query.type,r=e&&e.split("/");return r.length&&!o&&(r=r.splice(0,r.length-1)),r},getNoteData:($=Object(n.a)(regeneratorRuntime.mark(function t(){var e,o,r,n,c,l,f,h,m=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=$nuxt._route.params,o=e.user,r=e.book,n=e.pathMatch,c=void 0===n?"":n,l=this.getPathMatch(),f=[this[d.BOOK_LIST_GET](),this[d.CATALOGS_GET_CUR]({pathMatchArr:l})],this.isVisitor,"dir"===$nuxt._route.query.type||this.notesMap[this.curNote]||(h="".concat(o,"/").concat(r,"/").concat(c),f.push(this[d.NOTE_DES_GET]({fullPath:h,path:c+".md",user:o,repo:r}))),this.$showLoading(),Promise.all(f).then(function(t){var e=t.find(function(t){return t.err});e&&e.err?m.$alert({title:"getNoteData",content:e.err.message}):"dir"===$nuxt._route.query.type&&($nuxt._route.query.new?m.todoCreateNewFile():m.catalogMapNotes[m.curCatalog]&&m.catalogMapNotes[m.curCatalog].length?m.$router.push("/".concat(m.githubName,"/").concat(Object(I.f)(m.catalogMapNotes[m.curCatalog][0].fullPath))):m.noData=!0)}).catch(function(t){m.$alert({title:"getBookData",content:t.message})}).finally(function(){m.$hideLoading()});case 7:case"end":return t.stop()}},t,this)})),function(){return $.apply(this,arguments)}),todoCreateNewFile:function(){this.noData=!1,this.newFileNode={repo:this.curBook,path:this.curCatalog===this.curBook?"":this.curCatalog.replace("".concat(this.curBook,"/"),""),newFile:!0},this[l.NOTE_CUR_UPDATE]("NEW"),this.$router.push("/".concat(this.githubName,"/").concat(this.curCatalog,"?type=dir&new=1"))},doChooseCatalog:function(t){this.catalogMapNotes[t.fullPath]&&this.catalogMapNotes[t.fullPath].length?this.$router.push("/".concat(this.githubName,"/").concat(Object(I.f)(this.catalogMapNotes[t.fullPath][0].fullPath))):this.$router.push("/".concat(this.githubName,"/").concat(t.fullPath,"?type=dir"))},doUpdateNote:(L=Object(n.a)(regeneratorRuntime.mark(function t(){var e,o,r,n,c,f,h,m,v,y=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=y.length>0&&void 0!==y[0]?y[0]:{},o=e.force,r=[Promise.resolve({})],(e.newFile||e.modify)&&r.push(this[d.NOTE_DES_GET]({force:o,user:this.githubName,repo:this.curBook,path:e.path})),(e.newFile||e.delete)&&(n=((this.catalogs[this.curCatalog]||{}).rootModifyPath||this.catalogs[this.curCatalog]).path||"",c=this.getPathMatch(),f=n.split("/"),c=c.splice(f.length),console.log("this.curCatalog"),r.push(this[d.CATALOGS_GET_CUR]({force:o,pathMatchArr:c,path:n}))),this.$showLoading(),t.next=8,Promise.all(r);case 8:if(h=t.sent,this.$hideLoading(),(m=h.find(function(t){return t.err}))&&m.err&&this.$toast("重新接取数失败"),!e.newFile){t.next=17;break}this.newFileNode=null,this.$router.push("/".concat(this.githubName,"/").concat(this.curBook,"/").concat(Object(I.f)(e.path))),t.next=23;break;case 17:if(!e.delete){t.next=23;break}if(this.curNote.indexOf(e.path)===this.curNote.length-e.path.length){t.next=20;break}return t.abrupt("return");case 20:this[l.CATALOGS_CACHE_SAVE](),v=this.findHasFileDir("".concat(this.curBook,"/").concat(Object(I.b)(e.path))),this.$router.push("/".concat(this.githubName,"/").concat(v,"?type=dir"));case 23:case"end":return t.stop()}},t,this)})),function(){return L.apply(this,arguments)}),findHasFileDir:function(path){for(console.log("path",path);path&&!this.catalogMapNotes[path];)path=Object(I.b)(path);return console.log(),console.log("path",path),path},initEmitOn:function(){var t=this;f.a.$off("updateCurBooks"),f.a.$off("emitFromCatalog"),f.a.$on("emitFromCatalog",function(e){e.isNew?t.todoCreateNewFile({catalogId:e.catalogId}):t.doChooseCatalog(e)}),f.a.$on("updateCurBooks",function(){t[l.CATALOGS_CUR_SAVE](j.a.recentlyArticlesKey),t.getNoteData()})},init:(G=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.getNoteData(),!this.isVisitor){t.next=3;break}return t.abrupt("return");case 3:this.initEmitOn();case 4:case"end":return t.stop()}},t,this)})),function(){return G.apply(this,arguments)}),dealParams:(V=Object(n.a)(regeneratorRuntime.mark(function t(){var e,o,r,n,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.routerParams=$nuxt._route.params,e=$nuxt._route.params,o=e.user,r=e.book,n=e.pathMatch,c=void 0===n?"":n,this[l.BOOK_CUR_UPDATE](r),this[l.CUR_USER_INFO_SAVE]({gitName:o}),c&&(d=c.substring(0,Math.max(c.indexOf("/"),0)||c.length),this[l.CATALOGS_CUR_BLOG](d)),"dir"===$nuxt._route.query.type?this[l.CATALOGS_CUR_SAVE]("".concat(r,"/").concat(c)):(this[l.CATALOGS_CUR_SAVE]("".concat(r,"/").concat(Object(I.b)(c))),this[l.NOTE_CUR_UPDATE]("".concat(o,"/").concat(r,"/").concat(c,".md"))),this.pathMatch=c,this.init();case 8:case"end":return t.stop()}},t,this)})),function(){return V.apply(this,arguments)})}),mounted:function(){this.dealParams()}},z=(o(500),Object(y.a)(B,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex",class:{"flex-1":!t.isVisitor,"visitor-content":t.isVisitor}},[o("div",{staticClass:"page-left flex",class:{"visitor-left":t.isVisitor}},[o("div",{staticClass:"catalog-layout",class:{"hidden-catalog":!t.showDir,"catalog-layout-isVisitor":t.isVisitor,"box-shadow":!t.isVisitor}},[o("TreeItem")],1),t._v(" "),t.isVisitor?t._e():o("NoteBrief",{attrs:{list:t.curNoteList},on:{emitToCreateNote:t.todoCreateNewFile,emitUpdateNote:t.doUpdateNote}}),t._v(" "),t.isVisitor?o("div",{staticClass:"page-left-visitor"}):t._e()],1),t._v(" "),o("div",{staticClass:"flex-1 flex"},[t.noData?o("noNotes",{on:{toCreateFile:t.todoCreateNewFile}}):o("note-des",{attrs:{curNote:t.curEditNote,newFileNode:t.newFileNode},on:{emitUpdateNote:t.doUpdateNote}})],1)])},[],!1,null,"04a170f4",null));e.default=z.exports}}]);