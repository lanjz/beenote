exports.ids=[1],exports.modules=Array(92).concat([function(t,e,o){var content=o(106);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("6cc4dc9a",content,!0,t)}},function(t,e,o){var content=o(108);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("f20ca288",content,!0,t)}},function(t,e,o){var content=o(110);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("b2ad5a3c",content,!0,t)}},function(t,e,o){var content=o(112);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("c039f0d8",content,!0,t)}},function(t,e,o){var content=o(114);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("42f30937",content,!0,t)}},function(t,e,o){var content=o(116);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("80490834",content,!0,t)}},function(t,e,o){var content=o(118);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("0021f8dc",content,!0,t)}},function(t,e,o){var content=o(120);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("d1c25bde",content,!0,t)}},function(t,e,o){var content=o(132);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("659a64a6",content,!0,t)}},function(t,e,o){var content=o(134);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("f85336d6",content,!0,t)}},function(t,e,o){var content=o(136);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("55d9ff12",content,!0,t)}},function(t,e,o){var content=o(138);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var r=o(7).default;t.exports.__inject__=function(t){r("9f8000d6",content,!0,t)}},function(t,e,o){"use strict";var r=o(4),n=o(36),c={name:"TreeItem",props:{curNode:{type:Object,require:!0},actHash:{type:Object}},data:()=>({}),computed:{...Object(r.mapState)({noteCatalogue:t=>t.notes.noteCatalogue,curNote:t=>t.notes.curNote}),childList(){return this.noteCatalogue[this.curNote][this.curNode.name]||[]},act(){let t=this.actHash.name;return t&&t.toLowerCase()===this.curNode.name.toLowerCase()},actDot(){let t="##"===this.actHash.type?this.actHash.parent:this.actHash.name;return t&&t.toLowerCase()===this.curNode.name.toLowerCase()}},methods:{chooseHash(){n.a.$emit("chooseHash",this.curNode)}}},d=o(5);var l={name:"Tree",components:{NoteItem:Object(d.a)(c,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"catalogs-layout"},[t._ssrNode("<div data-v-47807de9><div"+t._ssrClass("catalogs-name",{act:t.act,actDot:t.actDot})+" data-v-47807de9><a"+t._ssrAttr("href","#"+t.curNode.name.toLowerCase())+" data-v-47807de9>"+t._ssrEscape(t._s(t.curNode.name))+"</a></div></div> "),t.childList.length?t._ssrNode("<div data-v-47807de9>","</div>",t._l(t.childList,function(e,r){return o("TreeItem",{key:r,attrs:{curNode:e,actHash:t.actHash}})}),1):t._e()],2)},[],!1,function(t){var e=o(105);e.__inject__&&e.__inject__(t)},"47807de9","cf5c2414").exports},data:()=>({actHash:{}}),computed:{...Object(r.mapState)({noteCatalogue:t=>t.notes.noteCatalogue,curNote:t=>t.notes.curNote}),catalogList(){if(!this.noteCatalogue||!this.curNote)return[];return(this.noteCatalogue[this.curNote]||{})[this.curNote]||[]}},methods:{getActTree(t,e="#"){const o=this.noteCatalogue[this.curNote];Object.values(o).flat(1/0).forEach(o=>{o.name.toLowerCase()===t&&o.type===e&&(this.actHash=o)})},getScroll(t){clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.markdownEl=this.markdownEl||[...document.querySelector(".markdown-content-style").querySelectorAll("h1"),...document.querySelector(".markdown-content-style").querySelectorAll("h2")];let t=this.markdownEl[0];if(this.markdownEl.forEach(e=>{if(t){let o=window.scrollY-e.offsetTop;if(o<0)return;o<window.scrollY-t.offsetTop&&(t=e)}}),t&&t.getAttribute&&location.hash!==t.getAttribute("id")){location.hash=t.getAttribute("id");const e="H1"===t.tagName?"#":"##";this.getActTree(t.getAttribute("id"),e)}},500)}},mounted(){this.actHash={name:decodeURI(this.$route.hash).substring(1)},n.a.$off("chooseHash"),n.a.$on("chooseHash",t=>{this.actHash=t}),window.addEventListener("scroll",this.getScroll)}};var h=Object(d.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.catalogList.length?o("div",{staticClass:"note-catalogue"},t._l(t.catalogList,function(e,r){return o("NoteItem",{key:r,attrs:{curNode:e,actHash:t.actHash}})}),1):t._e()},[],!1,function(t){var e=o(107);e.__inject__&&e.__inject__(t)},"423a384a","2c204eac");e.a=h.exports},function(t,e,o){"use strict";o.r(e);var r=o(92),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,"[data-v-47807de9]:root{--text-color:red}.catalogs-layout[data-v-47807de9]{font-size:15px;position:relative}.catalogs-layout .catalogs-layout[data-v-47807de9]{padding-left:20px}.catalogs-layout .catalogs-layout .catalogs-name[data-v-47807de9]:after{display:none}.catalogs-layout a[data-v-47807de9]{color:inherit;text-decoration:none}.catalogs-layout .catalogs-name[data-v-47807de9]{position:relative;padding:7px 7px 7px 20px;max-width:200px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.catalogs-layout .catalogs-name.act[data-v-47807de9]{color:#3eaf7c}.catalogs-layout .catalogs-name.actDot[data-v-47807de9]:after{width:10px;height:10px;transform:translateY(-50%);opacity:1}",""])},function(t,e,o){"use strict";o.r(e);var r=o(93),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,"[data-v-423a384a]:root{--text-color:red}.note-catalogue[data-v-423a384a]{position:relative;padding-left:15px}",""])},function(t,e,o){"use strict";o.r(e);var r=o(94),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,'[data-v-3fdcd11c]:root{--text-color:red}.catalogs-layout[data-v-3fdcd11c]{position:relative}.catalogs-layout .catalogs-layout[data-v-3fdcd11c]{padding-left:20px;margin-top:1px}.catalogs-layout.act-tree[data-v-3fdcd11c]:after{content:"";position:absolute;left:0;top:0;height:100%;background:#3eaf7c;width:5px}.iconfont[data-v-3fdcd11c]{font-size:25px;position:relative}.catalogs-item-layout[data-v-3fdcd11c]{cursor:pointer;padding:7px 25px;position:relative;transition:.3s}.catalogs-item-layout .icon-open[data-v-3fdcd11c]{display:none}.catalogs-item-layout .icon-close[data-v-3fdcd11c]{display:block}.catalogs-item-layout[data-v-3fdcd11c]:after{content:"";background:transparent;position:absolute;top:0;width:100%;height:100%;left:-100%;transition:.3s}.operate-triangle-btn[data-v-3fdcd11c]{display:none;position:absolute;width:16px;height:16px;right:12px;top:50%;transform:translateY(-50%)}.operate-triangle-btn .iconfont[data-v-3fdcd11c]{font-size:15px}.catalogs-item-layout .has-child[data-v-3fdcd11c]{position:absolute;border-left:6px solid #919191;border-top:5px solid transparent;border-bottom:5px solid transparent;width:0;height:0;left:12px;top:50%;transform:translateY(-6px);transition:.2s}.catalogs-item-layout .has-child[data-v-3fdcd11c]:after{content:"";width:20px;height:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.catalogs-item-layout .has-child.in-chain[data-v-3fdcd11c]{transform:translateY(-6px) rotate(90deg)}.visitor .act .catalogs-name[data-v-3fdcd11c]{color:#7eb59c}.visitor .act .catalogs-name.file[data-v-3fdcd11c]{color:#3eaf7c}.edit .catalogs-item-hover[data-v-3fdcd11c]:hover{background:#404040;color:#ddd}.edit .catalogs-item-hover:hover .operate-triangle-btn[data-v-3fdcd11c]{display:block;color:#ddd}.edit .catalogs-item-hover[data-v-3fdcd11c]:hover:after{background:#404040}.edit .catalogs-item-layout.act[data-v-3fdcd11c]{background:#5f5f5f;color:#ddd}.edit .catalogs-item-layout.act .icon-open[data-v-3fdcd11c]{display:block}.edit .catalogs-item-layout.act .icon-close[data-v-3fdcd11c]{display:none}.edit .catalogs-item-layout.act[data-v-3fdcd11c]:after,.edit .catalogs-item-layout.act[data-v-3fdcd11c]:hover,.edit .catalogs-item-layout.act[data-v-3fdcd11c]:hover:after{background:#5f5f5f}.catalogs-name[data-v-3fdcd11c],.edit-catalogs-input[data-v-3fdcd11c]{position:relative;max-width:150px;padding:0 5px}.edit-catalogs-input[data-v-3fdcd11c]{z-index:1;background:transparent;vertical-align:bottom;border:none;color:inherit;font-size:inherit;height:25px}.catalog-operate-layout[data-v-3fdcd11c]{position:fixed;background:rgba(0,0,0,.8);left:50%;top:50%;color:#fff;z-index:999;border-radius:5px}.catalog-operate-layout .catalog-operate-item[data-v-3fdcd11c]{width:150px;padding:10px 20px;position:relative}.catalog-operate-layout .catalog-operate-item[data-v-3fdcd11c]:not(:last-child){border-bottom:1px solid hsla(0,0%,100%,.2)}.catalog-operate-layout .catalog-operate-item.hadChild[data-v-3fdcd11c]:after{content:"";position:absolute;border-left:4px solid #fff;border-top:4px solid transparent;border-bottom:4px solid transparent;right:10px;top:50%;transform:translateY(-50%)}.catalog-operate-layout .catalog-operate-item:hover .operate-item-child[data-v-3fdcd11c]{display:block}.catalog-operate-layout .operate-item-child[data-v-3fdcd11c]{position:absolute;left:100%;top:0;width:100%;border-radius:0 5px 5px 0;background:rgba(0,0,0,.8);border-left:1px solid hsla(0,0%,100%,.2);display:none}.catalog-operate-layout .catalog-operate-item.builtIn[data-v-3fdcd11c]{border-bottom:1px solid hsla(0,0%,100%,.6)}#hello_recent[data-v-3fdcd11c]{font-size:24px}.loading-tree[data-v-3fdcd11c]{padding-left:25px}',""])},function(t,e,o){"use strict";o.r(e);var r=o(95),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,'[data-v-44d51a68]:root{--text-color:red}.catalogs-layout .catalogs-layout[data-v-44d51a68]{padding-left:20px;margin-top:1px}.iconfont[data-v-44d51a68]{font-size:25px;position:relative}.catalogs-item-layout[data-v-44d51a68]{cursor:pointer;padding:7px 25px;position:relative;transition:.3s}.catalogs-item-layout .icon-open[data-v-44d51a68]{display:none}.catalogs-item-layout .icon-close[data-v-44d51a68]{display:block}.catalogs-item-layout[data-v-44d51a68]:after{content:"";background:transparent;position:absolute;top:0;width:100%;height:100%;left:-100%;transition:.3s}.operate-triangle-btn[data-v-44d51a68]{display:none;position:absolute;width:16px;height:16px;right:12px;top:50%;transform:translateY(-50%)}.operate-triangle-btn .iconfont[data-v-44d51a68]{font-size:15px}.catalogs-item-layout .has-child[data-v-44d51a68]{position:absolute;border-left:6px solid #919191;border-top:5px solid transparent;border-bottom:5px solid transparent;width:0;height:0;left:12px;top:50%;transform:translateY(-6px);transition:.2s}.catalogs-item-layout .has-child[data-v-44d51a68]:after{content:"";width:20px;height:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.catalogs-layout-visitor .has-child[data-v-44d51a68]{position:relative;transform:none}.catalogs-item-layout .has-child.in-chain[data-v-44d51a68]{transform:translateY(-6px) rotate(90deg)}.catalogs-layout-visitor .has-child.in-chain[data-v-44d51a68]{transform:translateY(0) rotate(90deg)}.catalogs-item-hover[data-v-44d51a68]:hover{background:#404040;color:#ddd}.catalogs-item-hover:hover .operate-triangle-btn[data-v-44d51a68]{display:block;color:#ddd}.catalogs-item-hover[data-v-44d51a68]:hover:after{background:#404040}.catalogs-item-layout.act[data-v-44d51a68]{background:#5f5f5f;color:#ddd}.catalogs-item-layout.act .icon-open[data-v-44d51a68]{display:block}.catalogs-item-layout.act .icon-close[data-v-44d51a68]{display:none}.catalogs-item-layout.act[data-v-44d51a68]:after,.catalogs-item-layout.act[data-v-44d51a68]:hover,.catalogs-item-layout.act[data-v-44d51a68]:hover:after{background:#5f5f5f}.catalogs-name[data-v-44d51a68]{position:relative;padding:0 5px}.catalogs-name a[data-v-44d51a68]{color:inherit;text-decoration:none}.catalogs-name.b[data-v-44d51a68]{font-weight:700;font-size:18px}.edit-catalogs-input[data-v-44d51a68]{position:relative;z-index:1;max-width:150px;background:transparent;vertical-align:bottom;border:none;color:inherit;font-size:inherit;height:25px;padding:0 5px}.catalog-operate-layout[data-v-44d51a68]{position:fixed;background:rgba(0,0,0,.8);left:50%;top:50%;color:#fff;z-index:999;border-radius:5px}.catalog-operate-layout .catalog-operate-item[data-v-44d51a68]{width:150px;padding:10px 20px;position:relative}.catalog-operate-layout .catalog-operate-item[data-v-44d51a68]:not(:last-child){border-bottom:1px solid hsla(0,0%,100%,.2)}.catalog-operate-layout .catalog-operate-item.hadChild[data-v-44d51a68]:after{content:"";position:absolute;border-left:4px solid #fff;border-top:4px solid transparent;border-bottom:4px solid transparent;right:10px;top:50%;transform:translateY(-50%)}.catalog-operate-layout .catalog-operate-item:hover .operate-item-child[data-v-44d51a68]{display:block}.catalog-operate-layout .operate-item-child[data-v-44d51a68]{position:absolute;left:100%;top:0;width:100%;border-radius:0 5px 5px 0;background:rgba(0,0,0,.8);border-left:1px solid hsla(0,0%,100%,.2);display:none}.catalog-operate-layout .catalog-operate-item.builtIn[data-v-44d51a68]{border-bottom:1px solid hsla(0,0%,100%,.6)}.catalogs-layout-visitor .catalogs-item-hover[data-v-44d51a68]:after{display:none}.catalogs-layout-visitor .catalogs-item-hover[data-v-44d51a68]:hover{background:none;color:#3eaf7c}.catalogs-layout-visitor .catalogs-item-layout.act2[data-v-44d51a68]:after{content:"";position:absolute;left:0;top:0;width:6px;display:block;background:#3eaf7c}.catalogs-layout-visitor .catalogs-item-layout.file.act2[data-v-44d51a68]:after{display:none}.catalogs-layout-visitor .catalogs-item-layout.file.act2[data-v-44d51a68]{color:#3eaf7c}#hello_recent[data-v-44d51a68]{font-size:24px}',""])},function(t,e,o){"use strict";o.r(e);var r=o(96),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,'[data-v-35c07ef1]:root{--text-color:red}.is-visitor-catalog[data-v-35c07ef1]{overflow:auto;padding-bottom:100px;padding-top:50px}.catalog-content[data-v-35c07ef1]{overflow:auto;padding-bottom:20px}.catalog-content.visitor[data-v-35c07ef1]:after{content:"";height:70px;display:block}.cur-catalog[data-v-35c07ef1]{font-weight:700;font-size:25px;border-bottom:1px solid #e1e4e8;padding:10px 0 10px 25px}.blog-item[data-v-35c07ef1]{cursor:pointer;padding:7px 15px 7px 30px}.blog-item .iconfont[data-v-35c07ef1]{margin-right:5px;font-size:20px}.blog-item.act[data-v-35c07ef1]{color:#3eaf7c}',""])},function(t,e,o){"use strict";o.r(e);var r=o(97),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,'[data-v-6a2c2a5c]:root{--text-color:red}.article-item[data-v-6a2c2a5c]{padding:10px 20px;width:100%;cursor:pointer;position:relative;border-bottom:1px solid #000}.article-item .article-item-title[data-v-6a2c2a5c]{font-size:17px;color:#ddd}.article-item .article-item-mark[data-v-6a2c2a5c]{margin-top:7px;font-size:12px}.article-item .operate-icon[data-v-6a2c2a5c]{width:30px;height:30px;border-radius:50%;position:absolute;z-index:1;background:#5f5f5f;opacity:0;transform:scale(0);transition:.3s;text-align:center;line-height:30px;color:#19181d}.article-item .operate-icon .iconfont[data-v-6a2c2a5c]{font-size:18px}.article-item .operate-icon-delete[data-v-6a2c2a5c]{right:7px;top:7px}.article-item .operate-icon-sort[data-v-6a2c2a5c]{right:7px;bottom:7px;cursor:move}.article-item .operate-icon-delete[data-v-6a2c2a5c]:hover{background:#f4606c;color:#fff}.article-item .operate-icon-sort[data-v-6a2c2a5c]:hover{background:#398dee;color:#fff}.article-item:hover .operate-icon[data-v-6a2c2a5c]{opacity:1;transform:scale(1)}.article-item.act[data-v-6a2c2a5c]{background:#19181d}.article-item.act[data-v-6a2c2a5c]:after{content:"";position:absolute;width:4px;height:100%;left:0;top:0;background:#afb0b1}.article-layout[data-v-6a2c2a5c]{padding:15px 0;background:#2d2d2d;color:#919191;max-width:500px;transition:.3s}.article-layout .article-min-width[data-v-6a2c2a5c]{min-width:200px}.article-layout.hidden-article[data-v-6a2c2a5c]{max-width:0;overflow:hidden}.article-layout-input-box[data-v-6a2c2a5c]{background:#5f5f5f;color:#ddd;width:90%;height:40px;padding:0 10px;position:relative;margin:0 auto 10px}.article-layout-input-box .iconfont[data-v-6a2c2a5c]{display:block;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.article-layout-input[data-v-6a2c2a5c]{height:100%;border:none;background:transparent;display:inline-block;color:#ddd;outline:#fff;padding-right:46px}.article-label[data-v-6a2c2a5c]{margin:7px 0}.article-label-item[data-v-6a2c2a5c]{display:inline-block;padding:2px 5px;background:#5f5f5f;color:#202020;border-radius:2px;margin-bottom:3px;font-size:12px}.article-item-box[data-v-6a2c2a5c]{overflow-y:auto;overflow-x:hidden}.shortcut-add-layout[data-v-6a2c2a5c]{position:absolute;bottom:10px;right:10px;background:#398dee;z-index:5;width:42px;height:42px;border-radius:42px;cursor:pointer;text-align:center;line-height:44px}.shortcut-add-layout .iconfont[data-v-6a2c2a5c]{font-size:30px;color:#2d2d2d}.flip-list-move[data-v-6a2c2a5c]{transition:transform .5s}.no-move[data-v-6a2c2a5c]{transition:transform 0s}.ghost[data-v-6a2c2a5c]{opacity:.5;background:#c8ebfb}',""])},function(t,e,o){"use strict";o.r(e);var r=o(98),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,'[data-v-334aceba]:root{--text-color:red}#codeMirror[data-v-334aceba],.showCompileMarkdownBox[data-v-334aceba]{width:100%;height:100%}.code-mirror .demo-split-pane[data-v-334aceba]{padding:10px;overflow:auto}.code-mirror .showCompileMarkdownBox[data-v-334aceba]{padding:0 7px;overflow:auto;word-break:break-all}.code-mirror .ivu-split-horizontal[data-v-334aceba]{height:100%}.code-mirror .code-mirror-tags[data-v-334aceba]{background:#202020;position:relative}.code-mirror .code-mirror-tags .tags-item[data-v-334aceba]{border-bottom:1px solid #fff;position:relative;display:inline-block;padding:12px 15px;cursor:pointer}.code-mirror .code-mirror-tags .tags-item.act[data-v-334aceba]{color:#515a6e;background:#fff;z-index:2}.code-mirror .code-mirror-tags .tags-item[data-v-334aceba]:hover{color:#000}.code-mirror .code-mirror-tags .tags-item-2[data-v-334aceba]{display:inline-block;float:right;cursor:pointer}.code-mirror .code-mirror-tags .tags-item-2.act[data-v-334aceba]{background:#313131;color:#fff}.code-mirror .code-mirror-tags[data-v-334aceba]:after{content:"";height:1px;background:#e1e4e8;position:absolute;width:100%;left:0;z-index:1;bottom:0}.markdown-layout .markdown-edit-box[data-v-334aceba]{width:100%;height:100%;overflow:auto;padding:20px;background:#202020;color:#919191;border:none;outline:none;font-size:14px}.markdown-layout .md-body-layout[data-v-334aceba]{overflow:auto;background:#fff;padding:0;box-shadow:inset 0 0 4px 1px #e7eaef}.markdown-layout .markdown-operate-layout[data-v-334aceba]{position:absolute;z-index:2;right:20px;top:10px;color:#fff}.markdown-layout .markdown-operate-layout .icon-layout[data-v-334aceba]{display:inline-block;background:rgba(0,0,0,.7);padding:3px 5px;cursor:pointer;border-radius:3px;text-align:center}.markdown-layout .markdown-operate-layout .icon-layout.act[data-v-334aceba]{background:rgba(57,141,238,.7)}',""])},function(t,e,o){"use strict";o.r(e);var r=o(99),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,"[data-v-e6b266da]:root{--text-color:red}.article-layout[data-v-e6b266da]{background:#eee;position:relative}.article-layout .form-label-layout[data-v-e6b266da]{width:100%;text-align:left;font-size:12px;color:#adabab;padding-left:0}.article-layout .form-content-layout[data-v-e6b266da]{background:#fff;padding:7px 20px}.article-layout .add-options-item[data-v-e6b266da]{margin:5px}.article-layout .form-input[data-v-e6b266da],.article-layout .from-select[data-v-e6b266da]{border:none;outline:none;padding:0}.article-layout .form-group[data-v-e6b266da]:not(:first-child){margin:0}.article-layout .form-content-layout-select[data-v-e6b266da]{padding-top:18px;padding-bottom:18px}.article-layout .markdown-layout[data-v-e6b266da]{min-height:500px;padding:10px}.article-layout-theme1 .article-content[data-v-e6b266da]{padding:40px}.article-layout-theme1 .form-label-layout[data-v-e6b266da]{display:none}.article-layout-theme1 .form-input[data-v-e6b266da],.article-layout-theme1 .from-select[data-v-e6b266da]{border:none;outline:none;font-size:20px}.article-title[data-v-e6b266da]{border-bottom:1px solid #e1e4e8;background:#fff;height:45px;line-height:45px;padding:0 15px}.article-title .operate-list-operate .iconfont[data-v-e6b266da]{font-size:20px;cursor:pointer}.article-title .operate-list-operate .icon-box[data-v-e6b266da]{border:1px solid #919191;border-radius:50%;width:30px;height:30px;line-height:30px;text-align:center;display:inline-block}.article-title .operate-list-operate .icon-box.act[data-v-e6b266da]{background:#398dee;color:#fff}.article-content[data-v-e6b266da]{padding:7px}.full-input[data-v-e6b266da]{font-size:17px;outline:none;color:#5f5f5f}.markdown .form-label-layout[data-v-e6b266da]{display:none}.markdown .article-content[data-v-e6b266da],.markdown .markdown-layout[data-v-e6b266da]{padding:0}.markdown .scroll-box[data-v-e6b266da]{overflow:hidden}.markdown .form-group[data-v-e6b266da],.markdown .form-layout[data-v-e6b266da]{height:100%}.article-content.noSave[data-v-e6b266da]{border:1px solid #f4606c}.schema-operate-btn[data-v-e6b266da]{height:30px;line-height:30px;width:80px;text-align:center;background:#202020;color:#fff;display:inline-block;border-radius:2px;font-size:14px;cursor:pointer}.view-title[data-v-e6b266da]{text-align:center;padding-right:250px}.view-title small[data-v-e6b266da]{color:#666;font-size:16px;font-weight:400;margin-left:20px}.author-info-box[data-v-e6b266da]{padding:40px 40px 0;background:#fff;position:relative}.author-info-box .author-txt[data-v-e6b266da]{margin-left:10px;color:#666}.author-info-box .author-info .author-avatar[data-v-e6b266da]{overflow:hidden}.author-info-box .author-info .author-avatar img[data-v-e6b266da]{width:40px;height:40px;border-radius:50%}.author-info-box .author-info .author-name[data-v-e6b266da]{font-weight:500;font-size:20px}.author-info-box .label-box .label[data-v-e6b266da]{display:inline-block;padding:1px 6px;font-size:12px;color:#fff;border-radius:2px}.author-info-box .label-box .label-1[data-v-e6b266da]{background:#398dee}.author-info-box .label-box .label-2[data-v-e6b266da]{background:#f4606c}.author-info-box .icon-operate[data-v-e6b266da]{position:absolute;right:40px;bottom:0}.author-info-box .icon-operate img[data-v-e6b266da]{width:30px;height:30px}",""])},function(t,e,o){"use strict";var r=o(4),n=o(1),c=(o(9),o(36)),d=o(0),l=o(8),h=o(104),f={name:"TreeItem",props:{curNode:{type:Object,require:!0},isNewDir:{type:Boolean,default:function(){return!1}}},data:()=>({renameCatalog:!1,operateMenuStyle:{left:-1,top:"50%"},renameValue:"",newDir:{name:"新建文件夹",show:!1,isNew:!0},clickOpen:"",doNewDir:!1,isLoading:!1,hasLoad:!1}),components:{Catalogue:h.a},computed:{...Object(r.mapState)({catalogs:t=>t.catalogs.list,catalogsIsOpen:t=>t.catalogs.isOpen,actCatalog:t=>t.catalogs.curCatalog,schemaList:t=>Object.values(t.schema.list).filter(t=>t.fields.length),curBook:t=>t.books.curBook,curNote:t=>t.notes.curNote,catalogMapNotes:t=>t.catalogs.catalogMapNotes}),...Object(r.mapGetters)("catalogs",["treeChainList"]),...Object(r.mapGetters)("user",["githubName","isVisitor"]),hasChild(){return!this.isVisitor&&this.catalogMapNotes[this.curNode.fullPath]?this.hasDirChild:"dir"===this.curNode.type},hasDirChild(){const path=`${this.curNode.repo}/${this.curNode.path}`;return this.catalogs[path]&&this.catalogs[path].childNodes&&this.catalogs[path].childNodes.length},isOpen(){return this.clickOpen?1!==this.clickOpen:this.isInChin},isInChin(){return"dir"===this.curNode.type?this.actCatalog&&this.actCatalog.indexOf(this.curNode.fullPath)>-1:`${this.githubName}/${this.curNode.fullPath}`===this.curNote},childList(){if("dir"!==this.curNode.type)return[];let t=[];this.isVisitor&&(t=t=(this.catalogMapNotes||{})[this.curNode.fullPath]||[]);const e=(this.catalogs[this.curNode.fullPath]||{}).childNodes||[];return[...t,...e]}},watch:{curNode:{handler(){},deep:!0}},methods:{...Object(r.mapMutations)("catalogs",[d.CATALOGS_CUR_SAVE,d.CATALOGS_TEMPLATE_CREATE,d.CATALOGS_OPEN_TOGGLE,d.CATALOGS_OPEN_RESET,d.CATALOGS_SAVE,d.CATALOGS_NOTE_MAP_SAVE]),...Object(r.mapMutations)("notes",[d.NOTE_CUR_UPDATE]),...Object(r.mapActions)("catalogs",[n.CATALOGS_GET,n.CATALOGS_GET_CUR,n.CATALOGS_PUT,n.CATALOGS_POST,n.CATALOGS_DELETE]),...Object(r.mapActions)("articles",[n.ARTICLE_RECENTLY_LIST_GET]),...Object(r.mapActions)("notes",[n.NOTE_DELETE]),async getChildList(){this.catalogMapNotes[this.curNode.fullPath]||(this.isLoading=!0,await this[n.CATALOGS_GET_CUR]({getChild:!1,path:this.curNode.path}),this.isLoading=!1,this.hasLoad=!0)},async toggleOpenDir(t=!1,e){t?this.clickOpen=2:(2!==this.clickOpen&&await this.getChildList(),this.clickOpen=2===this.clickOpen?1:2)},chooseNote:function(t){this.curNote!==`${this.githubName}/${t.fullPath}`&&this.$router.push(`/${this.githubName}/${t.repo}/${Object(l.f)(t.path)}`)},async chooseCatalog(t){this.isVisitor?"dir"===this.curNode.type?this.toggleOpenDir():this.chooseNote(this.curNode):(await this.getChildList(),this.toggleOpenDir(!0),this[d.CATALOGS_CUR_SAVE](`${this.curNode.fullPath}`),c.a.$emit("emitFromCatalog",t||{...this.curNode}))},async getRecentlyArticles(){this.$showLoading(),await this[n.ARTICLE_RECENTLY_LIST_GET](),this.$hideLoading(),this[d.CATALOGS_CUR_SAVE]("recently")},showOperateMenu(t){const{clientX:e,clientY:o}=t;this.operateMenuStyle={top:`${o}px`,left:`${e}px`}},closeMenu(){this.operateMenuStyle.left=-1},todoRename(){this.renameValue=this.curNode.name,this.closeMenu(),this.renameCatalog=!0},todoCreateFile(){this.closeMenu(),this[d.CATALOGS_CUR_SAVE](this.curNode.fullPath),c.a.$emit("emitFromCatalog",{isNew:1})},todoDelete(){this.closeMenu(),[...this.catalogMapNotes[this.curNode.fullPath]||[],...this.catalogs[this.curNode.fullPath].childNodes||[]].length?this.$alert({title:"该目录存在文件，不可删除",showCancel:!1}):this.$alert({title:`你确认要删除"${this.curNode.name}"`}).then(async t=>{this.doDeleteCatalog()})},async doDeleteCatalog(){this.$showLoading(),(await this[n.NOTE_DELETE](this.curNode)).err||(this.$toast({title:"删除成功"}),await this[n.CATALOGS_GET]({force:!0,path:Object(l.b)(this.curNode.path),getChild:!1})),this.$hideLoading()},doRename(){this.renameCatalog=!1,this.isNewDir?this.addCatalog(this.renameValue,this.curNode.parentPath):this.renameValue&&this.renameValue!==this.curNode.name&&this.modifyCatalogName(this.renameValue,this.curNode)},submitCatalogName(t,e){const{isNew:o}=e;o?this.addCatalog(t,e):this.modifyCatalogName(t,e)},async modifyCatalogName(t,e){const{_id:o,parentId:r}=e;(await this[n.CATALOGS_PUT]({_id:o,name:t,parentId:r})).err||this.getDate(e,!0,!0)},async addCatalog(t,e){const data=[...this.catalogs[e]&&this.catalogs[e].childNodes?this.catalogs[e].childNodes:[],{path:`${e.substring(this.curBook.length+1)}/${t}`,fullPath:`${e}/${t}`,name:`${t}`,type:"dir",rootModifyPath:this.curNode.rootModifyPath}];this[d.CATALOGS_SAVE]({key:e,data:data}),this[d.CATALOGS_NOTE_MAP_SAVE]({key:`${e}/${t}`,data:[]}),this.$emit("emitExitNewDir")},exitNewDir(){this.newDir.parentPath="",this.doNewDir=!1},doCreateTemDir(){this.toggleOpenDir(!0),this.closeMenu(),this.doNewDir=!0,console.log("this.curNode.fullPath",this.curNode.fullPath),this.newDir.parentPath=this.curNode.fullPath,this.newDir.rootModifyPath=this.curNode.rootModifyPath||this.curNode.path},async getDate(t,e,o){const r=t||this.curNode;await this[n.CATALOGS_GET]({parentId:e?r.parentId||"root":r._id,bookId:this.curBook,force:o})},initOpenCatalog(){},init(){const{catalogId:t}=$nuxt._route.params;t===this.curNode._id&&(this.initOpenCatalog(),this.$emit("toInitOpenCatalog")),this.isNewDir&&this.todoRename(),document.addEventListener("click",t=>{this.$el.contains(t.target)})}},mounted(){this.init()}},m=o(5);var v=Object(m.a)(f,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"catalogs-layout",class:{visitor:t.isVisitor,edit:!t.isVisitor,"act-tree":t.isVisitor&&t.isInChin&&"file"===t.curNode.type}},[t._ssrNode("<div"+t._ssrClass("flex align-items-center catalogs-item-layout",{act:t.isInChin,"catalogs-item-hover":!(t.isNewDir||t.renameCatalog)})+" data-v-3fdcd11c>","</div>",[t._ssrNode((t.hasChild?"<div"+t._ssrClass("has-child",{"in-chain":t.isOpen})+" data-v-3fdcd11c></div>":"\x3c!----\x3e")+" "+(t.isVisitor?"\x3c!----\x3e":"<i"+t._ssrClass("iconfont",t.isInChin?"icon-wenjianjia":"icon-wendang1")+" data-v-3fdcd11c></i>")+" "),t.curNode.isNew||t.renameCatalog?o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.renameValue,expression:"renameValue",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus:select",arg:"select"}],staticClass:"edit-catalogs-input line-ellipsis",domProps:{value:t.renameValue},on:{blur:[t.doRename,function(e){return t.$forceUpdate()}],click:function(t){return t.stopPropagation()},input:function(e){e.target.composing||(t.renameValue=e.target.value.trim())}}},[]):t._ssrNode("<div"+t._ssrClass("catalogs-name line-ellipsis",t.curNode.type)+" data-v-3fdcd11c>"+t._ssrEscape(t._s(t.curNode.name))+"</div>"),t._ssrNode(" "+(t.curNode.icon?"\x3c!----\x3e":'<div class="operate-triangle-btn" data-v-3fdcd11c><i class="iconfont icon-tianjiajiahaowubiankuang" data-v-3fdcd11c></i></div>')+" "),-1!==t.operateMenuStyle.left?o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"catalog-operate-layout",style:t.operateMenuStyle},[t._ssrNode('<div class="catalog-operate-item" data-v-3fdcd11c>\n        新建笔记\n      </div> <div class="catalog-operate-item" data-v-3fdcd11c>新建文件夹</div>')]):t._e()],2),t._ssrNode(" "),t.childList.length?t._ssrNode("<div data-v-3fdcd11c>","</div>",t._l(t.childList,function(e,r){return o("TreeItem",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],key:r,attrs:{curNode:e},on:{toInitOpenCatalog:t.initOpenCatalog}})}),1):t._e(),t._ssrNode(" "),t.doNewDir?o("TreeItem",{attrs:{curNode:t.newDir,isNewDir:t.doNewDir},on:{emitExitNewDir:t.exitNewDir}}):t._e(),t._ssrNode(" "+(t.isLoading?'<div class="loading-tree" data-v-3fdcd11c><svg viewBox="25 25 50 50" class="loading-circular" data-v-3fdcd11c><circle cx="50" cy="50" r="20" fill="none" class="loading-circular-path" data-v-3fdcd11c></circle></svg></div>':"\x3c!----\x3e")+" "),t.isVisitor&&t.isInChin&&"file"===t.curNode.type?o("Catalogue"):t._e()],2)},[],!1,function(t){var e=o(109);e.__inject__&&e.__inject__(t)},"3fdcd11c","69d1ed42").exports,_={name:"TreeItem",props:{curNode:{type:Object,require:!0},isNewDir:{type:Boolean,default:function(){return!1}}},data:()=>({renameCatalog:!1,operateMenuStyle:{left:-1,top:"50%"},renameValue:"",newDir:{name:"新建文件夹",show:!1,isNew:!0},clickOpen:"",doNewDir:!1}),computed:{...Object(r.mapState)({catalogs:t=>t.catalogs.list,catalogsIsOpen:t=>t.catalogs.isOpen,actCatalog:t=>t.catalogs.curCatalog,schemaList:t=>Object.values(t.schema.list).filter(t=>t.fields.length),curBook:t=>t.books.curBook,curNote:t=>t.notes.curNote,noteCatalogue:t=>t.notes.noteCatalogue,catalogMapNotes:t=>t.catalogs.catalogMapNotes}),...Object(r.mapGetters)("catalogs",["treeChainList"]),...Object(r.mapGetters)("user",["githubName","isVisitor"]),hasChild(){if(this.isVisitor)return this.childList&&this.childList.length;const path=`${this.curNode.repo}/${this.curNode.path}`;return this.catalogs[path]&&this.catalogs[path].childNodes&&this.catalogs[path].childNodes.length},isOpen(){return this.clickOpen?1!==this.clickOpen:this.isInChin},isInChin(){return"dir"===this.curNode.type?this.curNote&&this.curNote.indexOf(this.curNode.fullPath)>-1&&"mao"!==this.curNode.type:`${this.githubName}/${this.curNode.fullPath}`===this.curNote},childList(){if("dir"!==this.curNode.type)return[];this.githubName,this.curNode.fullPath;return[...(this.catalogMapNotes||{})[this.curNode.fullPath]||[],...(this.catalogs[this.curNode.fullPath]||{}).childNodes||[]]}},watch:{curNode:{handler(){},deep:!0}},methods:{...Object(r.mapMutations)("catalogs",[d.CATALOGS_CUR_SAVE,d.CATALOGS_TEMPLATE_CREATE,d.CATALOGS_OPEN_TOGGLE,d.CATALOGS_OPEN_RESET,d.CATALOGS_SAVE,d.CATALOGS_NOTE_MAP_SAVE]),...Object(r.mapMutations)("notes",[d.NOTE_CUR_UPDATE]),...Object(r.mapActions)("catalogs",[n.CATALOGS_GET,n.CATALOGS_PUT,n.CATALOGS_POST,n.CATALOGS_DELETE]),...Object(r.mapActions)("articles",[n.ARTICLE_RECENTLY_LIST_GET]),...Object(r.mapActions)("notes",[n.NOTE_DELETE]),toggleOpenDir(t=!1,e){this.clickOpen=t?2:2===this.clickOpen?1:2},async chooseNote(t){"mao"!==this.curNode.type&&(this.toggleOpenDir(!0),this[d.NOTE_CUR_UPDATE](`/${this.githubName}/${this.curNode.fullPath}`),this.$router.push(`/${this.githubName}/${Object(l.f)(this.curNode.fullPath)}`))},async getRecentlyArticles(){this.$showLoading(),await this[n.ARTICLE_RECENTLY_LIST_GET](),this.$hideLoading(),this[d.CATALOGS_CUR_SAVE]("recently")},showOperateMenu(t){const{clientX:e,clientY:o}=t;this.operateMenuStyle={top:`${o}px`,left:`${e}px`}},closeMenu(){this.operateMenuStyle.left=-1},todoRename(){this.renameValue=this.curNode.name,this.closeMenu(),this.renameCatalog=!0},todoCreateFile(){this.closeMenu(),this[d.NOTE_CUR_UPDATE]("NEW"),this[d.CATALOGS_CUR_SAVE](this.curNode.fullPath),this.$router.push(`/${this.githubName}/${this.actCatalog}?type=dir&new=1`)},todoDelete(){this.closeMenu(),console.log(11),[...this.catalogMapNotes[this.curNode.fullPath]||[],...this.catalogs[this.curNode.fullPath].childNodes||[]].length?this.$alert({title:"该目录存在文件，不可删除",showCancel:!1}):this.$alert({title:`你确认要删除"${this.curNode.name}"`}).then(async t=>{this.doDeleteCatalog()})},async doDeleteCatalog(){this.$showLoading(),(await this[n.NOTE_DELETE](this.curNode)).err||(this.$toast({title:"删除成功"}),await this[n.CATALOGS_GET]({force:!0,path:Object(l.b)(this.curNode.path),getChild:!1})),this.$hideLoading()},doRename(){this.renameCatalog=!1,this.isNewDir?this.addCatalog(this.renameValue,this.curNode.parentPath):this.renameValue&&this.renameValue!==this.curNode.name&&this.modifyCatalogName(this.renameValue,this.curNode)},submitCatalogName(t,e){const{isNew:o}=e;o?this.addCatalog(t,e):this.modifyCatalogName(t,e)},async modifyCatalogName(t,e){const{_id:o,parentId:r}=e;(await this[n.CATALOGS_PUT]({_id:o,name:t,parentId:r})).err||this.getDate(e,!0,!0)},async addCatalog(t,e){const data=[...this.catalogs[e]&&this.catalogs[e].childNodes?this.catalogs[e].childNodes:[],{path:`${e.substring(this.curBook.length+1)}/${t}`,fullPath:`${e}/${t}`,name:`${t}`,type:"dir",rootModifyPath:this.curNode.rootModifyPath}];this[d.CATALOGS_SAVE]({key:e,data:data}),this[d.CATALOGS_NOTE_MAP_SAVE]({key:`${e}/${t}`,data:[]}),this.$emit("emitExitNewDir")},exitNewDir(){this.newDir.parentPath="",this.doNewDir=!1},doCreateTemDir(){this.toggleOpenDir(!0),this.closeMenu(),this.doNewDir=!0,console.log("this.curNode.fullPath",this.curNode.fullPath),this.newDir.parentPath=this.curNode.fullPath,this.newDir.rootModifyPath=this.curNode.rootModifyPath||this.curNode.path},async getDate(t,e,o){const r=t||this.curNode;await this[n.CATALOGS_GET]({parentId:e?r.parentId||"root":r._id,bookId:this.curBook,force:o})},initOpenCatalog(){},init(){const{catalogId:t}=$nuxt._route.params;t===this.curNode._id&&(this.initOpenCatalog(),this.$emit("toInitOpenCatalog")),this.isNewDir&&this.todoRename(),document.addEventListener("click",t=>{this.$el.contains(t.target)})}},mounted(){this.init()}};var x={name:"Tree",data:()=>({actHash:""}),components:{TreeItem:v,NoteItem:Object(m.a)(_,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"catalogs-layout",class:{"catalogs-layout-visitor":t.isVisitor}},[t._ssrNode("<div"+t._ssrClass("flex align-items-center catalogs-item-layout",{act2:t.isInChin,"catalogs-item-hover":!(t.isNewDir||t.renameCatalog),file:"dir"!==t.curNode.type})+' data-v-44d51a68><div class="catalogs-name line-ellipsis" data-v-44d51a68>'+t._ssrEscape(t._s(t.curNode.name))+"</div> "+("dir"===t.curNode.type?"<div"+t._ssrClass("has-child",{"in-chain":t.isOpen})+" data-v-44d51a68></div>":"\x3c!----\x3e")+"</div> "),t.childList?t._ssrNode("<div data-v-44d51a68>","</div>",t._l(t.childList,function(e,r){return o("TreeItem",{key:r,attrs:{curNode:e},on:{toInitOpenCatalog:t.initOpenCatalog}})}),1):t._e()],2)},[],!1,function(t){var e=o(111);e.__inject__&&e.__inject__(t)},"44d51a68","6570d4d4").exports},computed:{...Object(r.mapState)({cacheCatalogMapNotes:t=>t.catalogs.cacheCatalogMapNotes,catalogs:t=>t.catalogs.list,curCatalog:t=>t.catalogs.curCatalog,curBlog:t=>t.catalogs.curBlog,curBook:t=>t.books.curBook,catalogMapNotes:t=>t.catalogs.catalogMapNotes}),...Object(r.mapGetters)("user",["isVisitor","githubName"]),blogList:function(){return(this.catalogs[this.curBook]||{}).childNodes||[]},catalogList(){const t=`${this.curBook}/${this.curBlog}`,e=(this.catalogs[t]||{}).childNodes||[];let o=[];return this.isVisitor&&(o=this.catalogMapNotes[t]||[]),[...o,...e]}},methods:{...Object(r.mapActions)("catalogs",[n.CATALOGS_GET_CUR]),async init(){},goto(t){this.$router.push(`/${this.githubName}/${t.fullPath}?type=dir`)}},mounted(){this.init()}};var N=Object(m.a)(x,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"absolute-full flex direction-column"},[t._ssrNode('<div class="cur-catalog" data-v-35c07ef1>'+t._ssrEscape(t._s(t.curBlog||t.curBook))+"</div> "),t._ssrNode('<div class="flex-1 relative" data-v-35c07ef1>',"</div>",[t._ssrNode("<div"+t._ssrClass("absolute-full catalog-content",{visitor:t.isVisitor})+" data-v-35c07ef1>","</div>",t._l(t.catalogList,function(e,r){return t.curBlog?o("TreeItem",{key:e.name,attrs:{curNode:e,treeChain:[e.name]}}):o("div",t._l(t.blogList,function(e,r){return o("div",{key:r,staticClass:"blog-item",class:{act:0===t.curCatalog.indexOf(e.fullPath)},on:{click:function(o){return t.goto(e)}}},[o("i",{staticClass:"iconfont icon-shuji"}),t._v(t._s(e.name)+"\n         ")])}),0)}),1)])],2)},[],!1,function(t){var e=o(113);e.__inject__&&e.__inject__(t)},"35c07ef1","9cf47c5e");e.a=N.exports},function(t,e,o){"use strict";var r=o(4),n=o(0),c=o(1),d=o(90),l=o.n(d),h=o(91),f=o.n(h);const m=new l.a.Renderer;function v(text){return text.replace(/C\(N\)/g,'<span class="marked-checkBox"></span>').replace(/C\(Y\)/g,'<span class="marked-checkBox"><i class="iconfont icon-gou1"></i></span>').replace(/\((.*?)\)\?(\((.*?)\))?/g,function(t,e,o,r){return r?`<div class="marked-issue">${e}<i class="iconfont icon-wenhao color"> <span class="marked-issue-tip">${r}</span></i> </div>`:`<div class="marked-issue">${e}<i class="iconfont icon-wenhao"></i></div>`}).replace(/(<a .*?<\/a>)/g,function(t,e,o,r){return`${e}<span class="marked-iconfont-link">(<i class="iconfont icon-lianjie2"></i>)</span>`})}l.a.setOptions({renderer:m,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(code){return f.a.highlightAuto(code).value}});var _={model:{prop:"data",event:"update"},props:{data:String,showEdit:{default:()=>!1},onlyView:{default:()=>!0}},data(){const t=v(l()(this.data));return{split:.5,markDownValue:"",editMode:1,isEdit:this.showEdit,isPreview:!0,markdownHTML:t||""}},watch:{data:function(t){this.markDownValue=this.data||""},markDownValue:function(t){this.isPreview&&(clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.markdownHTML=v(l()(t))},500)),this.$emit("update",t)}},methods:{toggleEdit(){this.isEdit=!this.isEdit,this.isEdit||(this.isPreview=!0),window&&(window._markdownEdit=this.isEdit)},togglePreview(){this.isPreview=!this.isPreview,this.isPreview||(this.isEdit=!0),window&&(window._markdownEdit=this.isEdit)}},mounted(){window._markdownEdit&&(this.isEdit=!0),this.markDownValue=this.data||""}},x=o(5);var N=Object(x.a)(_,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.onlyView?o("div",{staticClass:"md-body-layout markdown-style"},[t._ssrNode('<div class="markdown-content-style" data-v-334aceba>'+t._s(t.markdownHTML)+"</div>")]):o("div",{staticClass:"code-mirror absolute-full flex direction-column markdown-layout"},[t._ssrNode("<div"+t._ssrClass("flex-1 flex absolute-full",{hideSplit:3!==t.editMode})+' data-v-334aceba><div class="markdown-operate-layout" data-v-334aceba><div'+t._ssrClass("icon-layout",{act:t.isEdit})+' data-v-334aceba><i class="iconfont icon-bianji2" data-v-334aceba></i></div> <div'+t._ssrClass("icon-layout",{act:t.isPreview})+' data-v-334aceba><i class="iconfont icon-yulan" data-v-334aceba></i></div></div> '+(t.isEdit?'<div class="flex-1 relative" data-v-334aceba><textarea class="markdown-edit-box box-shadow-inset" data-v-334aceba>'+t._ssrEscape(t._s(t.markDownValue))+"</textarea></div>":"\x3c!----\x3e")+" "+(t.isPreview?'<div class="flex-1 md-body-layout edit-layout relative" data-v-334aceba><div class="absolute-full markdown-style" data-v-334aceba><div class="markdown-content-style" data-v-334aceba>'+t._s(t.markdownHTML)+"</div></div></div>":"\x3c!----\x3e")+"</div>")],2)},[],!1,function(t){var e=o(117);e.__inject__&&e.__inject__(t)},"334aceba","10971c49").exports,y=o(8),C={props:{curNote:{type:Object}},data:function(){const{title:title="未命名",content:content=""}={};return{articleName:title,cacheName:title,content:content,editId:"new",schemaId:"",catalogId:"",test:"123",fields:[],contentList:[],cacheContent:"",isEditContents:!1,showList:!1,showEditContent:!1}},components:{MarkdownEdit:N},computed:{...Object(r.mapState)({catalogs:t=>t.catalogs.list,curCatalog:t=>t.catalogs.curCatalog,catalogMapNote:t=>t.catalogs.catalogMapNotes,bookList:t=>t.books.list,articles:t=>t.articles.list}),...Object(r.mapGetters)("user",["isVisitor","githubName"]),dataHasChange(){return JSON.stringify(this.content)!==JSON.stringify(this.cacheContent)}},watch:{curNote:{handler:function(t){this.setContent(t)},immediate:!0},editId:function(t){this[n.ARTICLE_CUS_SAVE](t)}},methods:{...Object(r.mapMutations)("articles",[n.ARTICLE_CUS_SAVE]),...Object(r.mapMutations)("books",[n.BOOK_CUR_UPDATE]),...Object(r.mapMutations)("notes",[n.NOTE_MAP_SAVE]),...Object(r.mapActions)("articles",[c.ARTICLE_DES_GET,c.ARTICLE_POST,c.ARTICLE_PUT,c.ARTICLE_CONTENT_PUT,c.ARTICLE_CONTENT_POST,c.ARTICLE_CONTENT_DELETE]),...Object(r.mapActions)("notes",[c.NOTE_POST,c.NOTE_PUT,c.NOTE_DELETE]),getTitle:t=>t?t.substring(0,t.length-3):t,setContent(t={}){this.cacheContent=this.content=t.contentMD||"",this.cacheName=this.articleName=this.getTitle(t.name)||"未命名"},async todoEdit(t=!1){if(!t&&(this.curNote.newFile||!this.articleName||this.cacheName===this.articleName))return;const e=`${Object(y.b)(this.curNote.path)}/${this.articleName}.md`;if(this.articleName.indexOf(".")>-1)return void this.$toast({title:"文件不能包吃住特殊字符“.”"});if(this.catalogMapNote[this.curCatalog].find(t=>t.path===e))return void this.$toast({title:`该目录已经存在"${this.articleName}"`});const o=`${Object(y.b)(this.curNote.path)}/${this.articleName}.md`;this.doPutNote(o)},async todoSave(){if(!this.articleName)return;if(this.articleName.indexOf(".")>-1)return void this.$toast({title:"文件不能包吃住特殊字符“.”"});const t=`${this.curNote.path?`${this.curNote.path}/`:""}${this.articleName}.md`;if(this.catalogMapNote[this.curCatalog]){if(this.catalogMapNote[this.curCatalog].find(e=>e.path===t))return void this.$toast({title:`该目录下已经存在"${this.articleName}"`})}this.$showLoading();const e=await this[c.NOTE_PUT]({content:this.content,path:t,newFile:!0});this.$hideLoading(),e.err?this.$toast({title:e.err.message}):(e.err||this.$toast({title:"添加成功"}),this.cacheName=this.articleName,this.cacheContent=this.content,this.$emit("emitUpdateNote",{force:!0,path:e.data.content.path,newFile:!0}))},async toDoPutNote(){this.isVisitor||this.dataHasChange&&!this.curNote.newFile&&this.doPutNote()},async doPutNote(path){this.isEditContents=!1,this.$showLoading();let t=await this[c.NOTE_PUT]({sha:this.curNote.sha,content:this.content,path:path||this.curNote.path});t.err?this.$toast({title:t.err.message}):(path&&(t=await this[c.NOTE_DELETE](this.curNote)),t.err?this.$toast({title:"删除旧文件失败："+t.err.message}):this.$toast({title:"修改成功"}),this.$hideLoading(),this.cacheName=this.articleName,this.cacheContent=this.content,this.$emit("emitUpdateNote",{force:!0,path:path||this.curNote.path,modify:!0,newFile:!!path}))}},mounted(){}};var w=Object(x.a)(C,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isVisitor?o("div",{staticClass:"form-layout theme-1",staticStyle:{width:"100%"}},[o("markdown-edit",{attrs:{onlyView:t.isVisitor,showEdit:t.curNote.newFile},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1):o("div",{staticClass:"article-layout flex direction-column flex-1 markdown"},[t._ssrNode('<div class="article-title flex " data-v-e6b266da><div class="flex-1 schema-title-layout relative" data-v-e6b266da>'+(t.isVisitor?'<div class="full-input" data-v-e6b266da>'+t._ssrEscape(t._s(t.articleName))+"</div>":"<input"+t._ssrAttr("value",t.articleName)+' class="full-input" data-v-e6b266da>')+"</div> "+(t.isVisitor?"\x3c!----\x3e":'<div class="schema-operate" data-v-e6b266da><span'+t._ssrClass("schema-operate-btn",{"disable-btn":!1})+t._ssrStyle(null,null,{display:t.curNote.newFile?"":"none"})+" data-v-e6b266da>保存</span></div>")+"</div> "),t._ssrNode('<div class="flex-1 flex" data-v-e6b266da>',"</div>",[o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.toDoPutNote,expression:"toDoPutNote"}],staticClass:"article-content relative flex-1 flex",class:{noSave:t.dataHasChange},on:{click:function(e){t.isEditContents=!0},keydown:function(e){return(e.type.indexOf("key")||83===e.keyCode)&&e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.toDoPutNote(e)):null}}},[t._ssrNode('<div class="flex-1 relative" data-v-e6b266da>',"</div>",[t._ssrNode('<div class="form-layout theme-1" data-v-e6b266da>',"</div>",[o("markdown-edit",{attrs:{onlyView:t.isVisitor,showEdit:t.curNote.newFile},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])])])],2)},[],!1,function(t){var e=o(119);e.__inject__&&e.__inject__(t)},"e6b266da","0bf21153");e.a=w.exports},function(t,e,o){"use strict";var r=o(4),n=o(89),c=o.n(n),d=o(0),l=o(1),h=(o(36),o(9),o(8)),f={props:{list:{type:Array,default:()=>[]}},data:()=>({filterKeys:"",filterList:[],drag:!1}),components:{draggable:c.a},computed:{...Object(r.mapState)({curCatalog:t=>t.catalogs.curCatalog,showBrief:t=>t.config.showBrief,bookList:t=>t.books.list,schemaList:t=>t.schema.list,curNote:t=>t.notes.curNote,notesMap:t=>t.notes.notesMap,curBook:t=>t.books.curBook}),...Object(r.mapGetters)("user",["isVisitor","githubName"]),dragOptions:()=>({animation:200,group:"description",disabled:!1,ghostClass:"ghost"})},watch:{list:function(t){t.length&&(!this.curNode||this.curNode),this.getList()},filterKeys:function(t){this.getList()}},filters:{getBookName:function(t,e){return e[t]?e[t].name:""},getCatalogsName:function(t,e){return e[t]?e[t].name:""}},methods:{...Object(r.mapActions)("notes",[l.NOTE_DELETE]),...Object(r.mapMutations)("notes",[d.NOTE_CUR_UPDATE]),chooseNote:function(t){this.curNote!==`${this.githubName}/${t.fullPath}`&&this.$router.push(`/${this.githubName}/${t.repo}/${Object(h.f)(t.path)}`)},todoDelete(t){this.$alert({title:`你确认要删除"${t.name}"`}).then(async e=>{e&&this.doDeleteNote(t)})},async doDeleteNote(t={}){this.$showLoading();const e=await this[l.NOTE_DELETE](t);this.$hideLoading(),e.err||this.$toast({title:"删除成功"}),this.$emit("emitUpdateNote",{force:!0,path:t.path,delete:!0})},shortcutAdd(){this.$emit("emitToCreateNote")},dragEnd(){this.drag=!1,console.log(this.filterList)},getList(){this.filterKeys||(this.filterList=this.list),this.filterList=this.list.filter(t=>t.name.indexOf(this.filterKeys)>-1).map(t=>({...t}))},isAct(path){return this.curNote.indexOf(path)>-1}},mounted(){this.getList()}},m=o(5);var component=Object(m.a)(f,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"article-layout box-shadow flex direction-column",class:{"hidden-article":!t.showBrief}},[t._ssrNode('<div class="flex-1 flex direction-column article-min-width relative" data-v-6a2c2a5c><div class="article-layout-input-box align-items-center" data-v-6a2c2a5c><input type="text"'+t._ssrAttr("value",t.filterKeys)+' class="article-layout-input" data-v-6a2c2a5c> <i class="iconfont icon-sousuo" data-v-6a2c2a5c></i></div> <div class="flex-1 relative" data-v-6a2c2a5c><div id="article-item-box" class="absolute-full article-item-box" data-v-6a2c2a5c>'+t._ssrList(t.filterList,function(e,o){return"<div"+t._ssrAttr("id",e._id)+t._ssrClass("article-item",{act:t.isAct(e.path)})+' data-v-6a2c2a5c><div class="article-item-title" data-v-6a2c2a5c>'+t._ssrEscape(t._s(e.name))+'</div> <div class="article-label" data-v-6a2c2a5c><span class="article-label-item" data-v-6a2c2a5c>'+t._ssrEscape(t._s(e.path))+'</span></div> <div class="operate-icon operate-icon-delete" data-v-6a2c2a5c><i class="iconfont icon-shanchu1" data-v-6a2c2a5c></i></div> <div class="operate-icon operate-icon-sort"'+t._ssrStyle(null,null,{display:t.filterKeys?"none":""})+' data-v-6a2c2a5c><i class="iconfont icon-paixu" data-v-6a2c2a5c></i></div></div>'})+"</div></div> "+(t.isVisitor||"NEW"===t.curNote?"\x3c!----\x3e":'<div class="shortcut-add-layout" data-v-6a2c2a5c><i class="iconfont icon-tianjiawenjian" data-v-6a2c2a5c></i></div>')+"</div>")])},[],!1,function(t){var e=o(115);e.__inject__&&e.__inject__(t)},"6a2c2a5c","71136b5b");e.a=component.exports},,,,,,,,function(t,e,o){"use strict";o.r(e);var r=o(100),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,'[data-v-2339dd11]:root{--text-color:red}.iconfont[data-v-2339dd11]{font-size:25px;position:relative;z-index:1}.catalogs-item-layout[data-v-2339dd11]{cursor:pointer;padding:7px 25px;position:relative;transition:.3s}.catalogs-item-layout .icon-open[data-v-2339dd11]{display:none}.catalogs-item-layout .icon-close[data-v-2339dd11]{display:block}.catalogs-item-layout[data-v-2339dd11]:after{content:"";background:transparent;position:absolute;top:0;width:100%;height:100%;left:-100%;transition:.3s}.catalogs-item-layout[data-v-2339dd11]:hover,.catalogs-item-layout[data-v-2339dd11]:hover:after{background:#e1e4e8}.catalogs-item-layout.act[data-v-2339dd11]{background:#2d2d2d;color:#fff}.catalogs-item-layout.act .icon-open[data-v-2339dd11]{display:block}.catalogs-item-layout.act .icon-close[data-v-2339dd11]{display:none}.catalogs-item-layout.act[data-v-2339dd11]:after,.catalogs-item-layout.act[data-v-2339dd11]:hover,.catalogs-item-layout.act[data-v-2339dd11]:hover:after{background:#2d2d2d}.catalogs-name[data-v-2339dd11],.edit-catalogs-input[data-v-2339dd11]{position:relative;z-index:1;max-width:150px;padding:0 5px}.edit-catalogs-input[data-v-2339dd11]{background:transparent;vertical-align:bottom;border:none;color:inherit;font-size:inherit;height:25px}.catalog-operate-layout[data-v-2339dd11]{position:fixed;background:rgba(0,0,0,.8);left:50%;top:50%;color:#fff;z-index:999;border-radius:5px;overflow:hidden}.catalog-operate-layout .catalog-operate-item[data-v-2339dd11]{width:150px;padding:10px 20px}.catalog-operate-layout .catalog-operate-item[data-v-2339dd11]:not(:last-child){border-bottom:1px solid #e1e4e8}',""])},function(t,e,o){"use strict";o.r(e);var r=o(101),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,"[data-v-cf6fdb9a]:root{--text-color:red}.catalogs-layout .catalogs-layout[data-v-cf6fdb9a]{padding-left:20px}",""])},function(t,e,o){"use strict";o.r(e);var r=o(102),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,"[data-v-f82a8312]:root{--text-color:red}.no-data[data-v-f82a8312]{flex:1;font-size:20px;text-align:center;color:#7e8896;padding:25% 20px 20px}.no-data .iconfont[data-v-f82a8312]{font-size:100px}.no-data .create-btn[data-v-f82a8312]{color:#398dee;cursor:pointer}",""])},function(t,e,o){"use strict";o.r(e);var r=o(103),n=o.n(r);for(var c in r)"default"!==c&&function(t){o.d(e,t,function(){return r[t]})}(c);e.default=n.a},function(t,e,o){(t.exports=o(6)(!1)).push([t.i,"[data-v-04a170f4]:root{--text-color:red}.visitor-content[data-v-04a170f4]{padding-top:70px}.book-slider-layout[data-v-04a170f4]{padding:15px;background:#2d2d2d}.book-layout[data-v-04a170f4]{margin-top:40px;width:38px;height:38px;cursor:pointer;position:relative;z-index:1}.book-layout .book-icon-layout[data-v-04a170f4]{line-height:38px;width:100%;height:100%;text-align:center;border-radius:50%;background:#fff;overflow:hidden;position:relative}.book-layout .iconfont[data-v-04a170f4]{font-size:26px}.book-layout .book-list-layout[data-v-04a170f4]{max-width:300px;padding:7px 20px;background:#2d2d2d;position:absolute;left:100%;top:0;transition:.3s;transform:scale(0);transform-origin:0 15px}.book-layout .book-list-layout .book-list-item-layout[data-v-04a170f4]{color:#fff;text-align:center}.book-layout .book-list-layout .book-list-item-layout .icon[data-v-04a170f4]{width:25px;height:25px;line-height:22px;border:1px solid #fff;border-radius:50%}.book-layout .book-list-layout .book-list-item-layout .icon .iconfont[data-v-04a170f4]{font-size:16px}.book-layout .book-list-layout .book-list-item-layout .book-name[data-v-04a170f4]{font-size:12px;margin-left:10px}.book-layout .book-list-layout .book-list-item-layout[data-v-04a170f4]:not(:last-child){margin-bottom:10px}.book-layout .book-list-layout .book-list-item-layout.act .icon[data-v-04a170f4]{border:1px solid #398dee;background:#398dee}.show-book-list:hover .book-list-layout[data-v-04a170f4]{transform:scale(1)}.book-layout.act[data-v-04a170f4]{transform:scale(1.2)}.book-layout.act .book-icon-layout[data-v-04a170f4]{background:#398dee}.book-layout.act .book-icon-layout .iconfont[data-v-04a170f4]{color:#fff}.book-layout[data-v-04a170f4]:not(:last-child){margin-bottom:10px}.catalog-layout[data-v-04a170f4]{padding:15px 2px;overflow:auto;background:#202020;color:#919191;width:200px;max-width:200px;transition:.3s;position:relative;height:100%}.catalog-layout-isVisitor[data-v-04a170f4]{position:fixed;left:0;width:280px;max-width:280px;top:70px;bottom:0;background:#fff;color:#777;border-right:1px solid #e9e7e7;z-index:2}.hidden-catalog[data-v-04a170f4]{padding:15px 0;max-width:0;overflow:hidden}.page-left-visitor[data-v-04a170f4],.page-right[data-v-04a170f4]{width:280px}.visitor-left[data-v-04a170f4]{padding-right:6px}",""])},,function(t,e,o){"use strict";o.r(e);var r=o(4),n=o(0),c=o(1),d=o(36),l=o(121),h={name:"TreeItem",props:{curCatalog:{type:Object,default:function(){return{}}},item:{type:Object,require:!0},index:{type:Number,require:!0},isNewDir:{type:Boolean,default:function(){return!1}}},data:()=>({renameCatalog:!1,operateMenuStyle:{left:-1,top:"50%"},renameValue:""}),methods:{chooseCatalog(data,t){this.$emit("emitChooseCatalog",data,t)},showOperateMenu(t){const{clientX:e,clientY:o}=t;this.operateMenuStyle={top:`${o}px`,left:`${e}px`}},closeMenu(){this.operateMenuStyle.left=-1},todoRename(){this.renameValue=this.item.name,this.closeMenu(),this.renameCatalog=!0},doRename(){this.renameCatalog=!1,this.isNewDir?this.$emit("emitSubmitCatalogName",this.renameValue,this.item):this.renameValue&&this.renameValue!==this.item.name&&this.$emit("emitSubmitCatalogName",this.renameValue,this.item)},todoCreateTemDir(){this.closeMenu(),this.$emit("emitDoCreateTemDir",this.item)}},mounted(){this.isNewDir&&this.todoRename(),document.addEventListener("click",t=>{this.$el.contains(t.target)})}},f=o(5);var m=Object(f.a)(h,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"flex align-items-center catalogs-item-layout",class:{act:t.curCatalog._id===t.item._id},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.chooseCatalog(t.item,t.index)},contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),o=e,t.showOperateMenu(o,t.item,t.index);var o}}},[t._ssrNode('<div class="iconfont" data-v-2339dd11><svg aria-hidden="true" class="icon icon-close" data-v-2339dd11><use xlink:href="#icon-wenjian2" data-v-2339dd11></use></svg> <svg aria-hidden="true" class="icon  icon-open" data-v-2339dd11><use xlink:href="#icon-wenjian-" data-v-2339dd11></use></svg></div> '),t.item.isNew||t.renameCatalog?o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.renameValue,expression:"renameValue",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus:select",arg:"select"}],staticClass:"edit-catalogs-input line-ellipsis",domProps:{value:t.renameValue},on:{blur:[t.doRename,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.renameValue=e.target.value.trim())}}},[]):t._ssrNode('<div class="catalogs-name line-ellipsis" data-v-2339dd11>'+t._ssrEscape(t._s(t.item.name))+"</div>"),t._ssrNode(" "+(-1!==t.operateMenuStyle.left?'<div class="catalog-operate-layout"'+t._ssrStyle(null,t.operateMenuStyle,null)+' data-v-2339dd11><div class="catalog-operate-item" data-v-2339dd11>新建文件夹</div> <div class="catalog-operate-item" data-v-2339dd11>重命名</div> <div class="catalog-operate-item" data-v-2339dd11>删除</div></div>':"\x3c!----\x3e"))],2)},[],!1,function(t){var e=o(131);e.__inject__&&e.__inject__(t)},"2339dd11","fa0bb056").exports,v={name:"Tree",props:{parentId:{type:String,require:!0},treeNode:{type:Array,default:function(){return[]}},isNewDir:{type:Boolean,default:function(){return!1}}},components:{TreeItem:m},data:()=>({operateMenuStyle:{left:-1,top:"50%"},newDir:{parentId:"",name:"新建文件夹",show:!1,isNew:!0}}),computed:{...Object(r.mapState)({catalogs:t=>t.catalogs.catalogs,curCatalog:t=>t.catalogs.curCatalog})},methods:{...Object(r.mapMutations)([n.CATALOGS_CUR_SAVE,n.CATALOGS_TEMPLATE_CREATE]),...Object(r.mapActions)([c.CATALOGS_GET,c.CATALOGS_PUT,c.CATALOGS_POST]),async getDate(){await this[c.CATALOGS_GET]({parentId:this.parentId})},init(){this.isNewDir||this.getDate()},isNewCondition(t){return this.newDir.parentId===t._id},chooseCatalog(data,t){this[n.CATALOGS_CUR_SAVE]({data:data,treeNode:this.getTreeNode(data,t)})},getTreeNode(data,t){return[...this.treeNode,{...data,showIndex:t}]},showOperateMenu(t){const{offsetX:e,offsetY:o}=t;this.operateMenuStyle={top:`${o}px`,left:`${e}px`}},submitCatalogName(t,e){const{isNew:o}=e;o?this.addCatalog(t,e):this.modifyCatalogName(t,e)},async modifyCatalogName(t,e){const{_id:o}=e;(await this[c.CATALOGS_PUT]({id:o,name:t})).err||this.getDate()},async addCatalog(t,e){const{parentId:o}=e,r=await this[c.CATALOGS_POST]({parentId:o,name:t});this.newDir.parentId="",r.err||this.getDate()},doCreateTemDir({_id:t}){this.newDir.parentId=t}},mounted(){this.init()}};var _=Object(f.a)(v,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"catalogs-layout"},[t.isNewDir?t._ssrNode("<div"+t._ssrAttr("abc",t.isNewDir)+" data-v-cf6fdb9a>","</div>",[o("TreeItem",{attrs:{item:t.newDir,curCatalog:t.curCatalog,isNewDir:t.isNewDir},on:{emitChooseCatalog:t.chooseCatalog,emitSubmitCatalogName:t.submitCatalogName,emitDoCreateTemDir:t.doCreateTemDir}})],1):t._e(),t._ssrNode(" "),t._l(t.catalogs[t.parentId],function(e,r){return t.catalogs[t.parentId]?t._ssrNode("<div data-v-cf6fdb9a>","</div>",[o("TreeItem",{attrs:{item:e,index:r,curCatalog:t.curCatalog},on:{emitChooseCatalog:t.chooseCatalog,emitSubmitCatalogName:t.submitCatalogName,emitDoCreateTemDir:t.doCreateTemDir}}),t._ssrNode(" "),t.newDir.parentId===e._id||e.hasChild?o("Tree",{attrs:{parentId:e._id,treeNode:t.getTreeNode(e,r),isNewDir:t.isNewCondition(e)}}):t._e()],2):t._e()})],2)},[],!1,function(t){var e=o(133);e.__inject__&&e.__inject__(t)},"cf6fdb9a","371ac81e").exports,x=o(104),N=o(123),y=o(122),C=o(9),w={data:()=>({}),computed:{...Object(r.mapGetters)("user",["isVisitor"])},methods:{toCreateNote(t){this.$emit("toCreateFile")}},mounted(){}};var O=Object(f.a)(w,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"no-data"},[this._ssrNode('<i class="iconfont icon-wushuju" data-v-f82a8312></i> '+(this.isVisitor?"<div data-v-f82a8312>当前目录还没有笔记</div>":'<div data-v-f82a8312>还没任何有笔记，<span class="create-btn" data-v-f82a8312>快速创建</span></div>'))])},[],!1,function(t){var e=o(135);e.__inject__&&e.__inject__(t)},"f82a8312","03c07413").exports,k=o(8),E=(o(3),{async fetch(t){const{store:e,params:o}=t,{user:r,book:n,pathMatch:c}=o;if(t.route.query.new)return;if(e.commit("books/BOOK_CUR_UPDATE",n),"dir"===t.route.query.type)return void e.commit("catalogs/CATALOGS_CUR_SAVE",`${n}/${c}`);const d=Object(k.b)(c),l=`${r}/${n}/${c}.md`;if(e.commit("catalogs/CATALOGS_CUR_SAVE",`${n}/${d}`),e.commit("notes/NOTE_CUR_UPDATE",l),e.state.notes.notesMap&&e.state.notes.notesMap[l])return;const h=[e.dispatch("notes/NOTE_DES_GET",{fullPath:l,path:c+".md",user:r,repo:n})];e.state.user.curUserInfo.gitName,e.state.user.loginUserInfo.gitName;t.route.query.view,t.route.query.view&&e.commit("user/VIEW_STATUS_SAVE",!0),await Promise.all(h)},components:{TreeItem:l.a,NoteBrief:N.a,noteDes:y.a,noNotes:O,Catalogue:x.a,VisitorTreeItem:_},data:function(){return{noData:!1,newFileNode:null,routerParams:{}}},head(){const{user:t,book:e,pathMatch:o}=this.routerParams;let r=[o||e];const n=[...r,this.curUserInfo.username];let c="";return this.curEditNote.contentMD&&(c=this.curEditNote.contentMD.slice(0,150)),{title:Object(k.e)(n.join("-")),meta:[{hid:"keywords",name:"keywords",content:r.join(",")},{hid:"description",name:"description",content:c}]}},computed:{...Object(r.mapState)({notesMap:t=>t.notes.notesMap,curBook:t=>t.books.curBook,curNote:t=>t.notes.curNote,showDir:t=>t.config.showDir,curCatalog:t=>t.catalogs.curCatalog,catalogs:t=>t.catalogs.list,catalogMapNotes:t=>t.catalogs.catalogMapNotes,curUserInfo:t=>t.user.curUserInfo,onlyView:t=>t.user.onlyView}),...Object(r.mapGetters)("catalogs",["treeChainList"]),...Object(r.mapGetters)("user",["isVisitor","githubName"]),curNoteList:function(){return this.curCatalog&&this.catalogMapNotes&&this.catalogMapNotes[this.curCatalog]||[]},curEditNote:function(){const t=this.notesMap[this.curNote];return this.newFileNode?{...this.newFileNode}:{...t}||{}}},methods:{...Object(r.mapMutations)("catalogs",[n.CATALOGS_CUR_SAVE,n.CATALOGS_CACHE_SAVE,n.CATALOGS_CUR_BLOG,n.CATALOGS_REMOVE]),...Object(r.mapMutations)("notes",[n.NOTE_CUR_UPDATE]),...Object(r.mapMutations)("books",[n.BOOK_CUR_UPDATE]),...Object(r.mapMutations)("user",[n.CUR_USER_INFO_SAVE]),...Object(r.mapActions)("books",[c.BOOK_LIST_GET]),...Object(r.mapActions)("notes",[c.NOTES_RECENTLY_GET,c.NOTES_GET,c.NOTE_DES_GET]),...Object(r.mapActions)("catalogs",[c.CATALOGS_GET,c.CATALOGS_GET_CUR]),...Object(r.mapActions)("user",[c.USER_INFO_GET]),getPathMatch(){const{pathMatch:t=""}=$nuxt._route.params,e="dir"===$nuxt._route.query.type;let o=t&&t.split("/");return o.length&&!e&&(o=o.splice(0,o.length-1)),o},async getNoteData(){const{user:t,book:e,pathMatch:o=""}=$nuxt._route.params;let r=this.getPathMatch();const n=[this[c.BOOK_LIST_GET](),this[c.CATALOGS_GET_CUR]({pathMatchArr:r})];if(this.isVisitor,"dir"!==$nuxt._route.query.type&&!this.notesMap[this.curNote]){const r=`${t}/${e}/${o}`;n.push(this[c.NOTE_DES_GET]({fullPath:r,path:o+".md",user:t,repo:e}))}this.$showLoading(),Promise.all(n).then(t=>{const e=t.find(t=>t.err);e&&e.err?this.$alert({title:"getNoteData",content:e.err.message}):"dir"===$nuxt._route.query.type&&($nuxt._route.query.new?this.todoCreateNewFile():this.catalogMapNotes[this.curCatalog]&&this.catalogMapNotes[this.curCatalog].length?this.$router.push(`/${this.githubName}/${Object(k.f)(this.catalogMapNotes[this.curCatalog][0].fullPath)}`):this.noData=!0)}).catch(t=>{this.$alert({title:"getBookData",content:t.message})}).finally(()=>{this.$hideLoading()})},todoCreateNewFile(){this.noData=!1,this.newFileNode={repo:this.curBook,path:this.curCatalog===this.curBook?"":this.curCatalog.replace(`${this.curBook}/`,""),newFile:!0},this[n.NOTE_CUR_UPDATE]("NEW"),this.$router.push(`/${this.githubName}/${this.curCatalog}?type=dir&new=1`)},doChooseCatalog(t){this.catalogMapNotes[t.fullPath]&&this.catalogMapNotes[t.fullPath].length?this.$router.push(`/${this.githubName}/${Object(k.f)(this.catalogMapNotes[t.fullPath][0].fullPath)}`):this.$router.push(`/${this.githubName}/${t.fullPath}?type=dir`)},async doUpdateNote(t={}){const{force:e}=t;let o=[Promise.resolve({})];if((t.newFile||t.modify)&&o.push(this[c.NOTE_DES_GET]({force:e,user:this.githubName,repo:this.curBook,path:t.path})),t.newFile||t.delete){const t=((this.catalogs[this.curCatalog]||{}).rootModifyPath||this.catalogs[this.curCatalog]).path||"";let r=this.getPathMatch();const n=t.split("/");r=r.splice(n.length),console.log("this.curCatalog"),o.push(this[c.CATALOGS_GET_CUR]({force:e,pathMatchArr:r,path:t}))}this.$showLoading();const r=await Promise.all(o);this.$hideLoading();const d=r.find(t=>t.err);if(d&&d.err&&this.$toast("重新接取数失败"),t.newFile)this.newFileNode=null,this.$router.push(`/${this.githubName}/${this.curBook}/${Object(k.f)(t.path)}`);else if(t.delete){if(this.curNote.indexOf(t.path)!==this.curNote.length-t.path.length)return;this[n.CATALOGS_CACHE_SAVE]();const e=this.findHasFileDir(`${this.curBook}/${Object(k.b)(t.path)}`);this.$router.push(`/${this.githubName}/${e}?type=dir`)}},findHasFileDir(path){for(console.log("path",path);path&&!this.catalogMapNotes[path];)path=Object(k.b)(path);return console.log(),console.log("path",path),path},initEmitOn(){d.a.$off("updateCurBooks"),d.a.$off("emitFromCatalog"),d.a.$on("emitFromCatalog",t=>{const{isNew:e}=t;e?this.todoCreateNewFile({catalogId:t.catalogId}):this.doChooseCatalog(t)}),d.a.$on("updateCurBooks",()=>{this[n.CATALOGS_CUR_SAVE](C.a.recentlyArticlesKey),this.getNoteData()})},async init(){this.getNoteData(),this.isVisitor||this.initEmitOn()},async dealParams(){this.routerParams=$nuxt._route.params;const{user:t,book:e,pathMatch:o=""}=$nuxt._route.params;if(this[n.BOOK_CUR_UPDATE](e),this[n.CUR_USER_INFO_SAVE]({gitName:t}),o){const t=o.substring(0,Math.max(o.indexOf("/"),0)||o.length);this[n.CATALOGS_CUR_BLOG](t)}"dir"===$nuxt._route.query.type?this[n.CATALOGS_CUR_SAVE](`${e}/${o}`):(this[n.CATALOGS_CUR_SAVE](`${e}/${Object(k.b)(o)}`),this[n.NOTE_CUR_UPDATE](`${t}/${e}/${o}.md`)),this.pathMatch=o,this.init()}},mounted(){this.dealParams()}});var T=Object(f.a)(E,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex",class:{"flex-1":!t.isVisitor,"visitor-content":t.isVisitor}},[t._ssrNode("<div"+t._ssrClass("page-left flex",{"visitor-left":t.isVisitor})+" data-v-04a170f4>","</div>",[t._ssrNode("<div"+t._ssrClass("catalog-layout",{"hidden-catalog":!t.showDir,"catalog-layout-isVisitor":t.isVisitor,"box-shadow":!t.isVisitor})+" data-v-04a170f4>","</div>",[o("TreeItem")],1),t._ssrNode(" "),t.isVisitor?t._e():o("NoteBrief",{attrs:{list:t.curNoteList},on:{emitToCreateNote:t.todoCreateNewFile,emitUpdateNote:t.doUpdateNote}}),t._ssrNode(" "+(t.isVisitor?'<div class="page-left-visitor" data-v-04a170f4></div>':"\x3c!----\x3e"))],2),t._ssrNode(" "),t._ssrNode('<div class="flex-1 flex" data-v-04a170f4>',"</div>",[t.noData?o("noNotes",{on:{toCreateFile:t.todoCreateNewFile}}):o("note-des",{attrs:{curNote:t.curEditNote,newFileNode:t.newFileNode},on:{emitUpdateNote:t.doUpdateNote}})],1)],2)},[],!1,function(t){var e=o(137);e.__inject__&&e.__inject__(t)},"04a170f4","084c1e82");e.default=T.exports}]);
//# sourceMappingURL=a435696f0a0fc8d83cd4.js.map